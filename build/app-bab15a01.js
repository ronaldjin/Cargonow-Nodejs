!function(){angular.module("app",["ui.router","ngFileUpload","pascalprecht.translate","underscore.string","auth","ad","ngMaterial","textAngular","blogs","auth.user","auth.manager","auth.notifications","ad.classified","ad.promotion","article","events","common","sections.header","sections.about","sections.demographics","sections.archive","sections.home","sections.contact","sections.testimonials","sections.radio","sections.widgets","ngCookies","angular-capitalize-filter","ngAnimate","flow","ngSanitize","lumx","ngMessages","ngTouch","toastr","ezfb","djds4rce.angular-socialshare","firebase","mwl.calendar"]).config(["ezfbProvider",function(e){e.setInitParams({xfbml:!0,appId:"422346614642986",version:"v2.8"})}]).config(["ezfbProvider",function(e){}]).config(["$mdThemingProvider","$mdIconProvider","$compileProvider",function(e,t,n){n.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|mms):/),t.defaultIconSet("./img/svg/avatars.svg",128).icon("menu","./img/svg/menu.svg",24).icon("share","./img/svg/share.svg",24).icon("google_plus","./img/svg/google_plus.svg",512).icon("hangouts","./img/svg/hangouts.svg",512).icon("twitter","./img/svg/twitter.svg",512).icon("phone","./img/svg/phone.svg",512),e.theme("default").primaryPalette("grey").accentPalette("red")}]).config(["$sceProvider","$translateProvider",function(e,t){t.useSanitizeValueStrategy(null),t.useCookieStorage(),t.preferredLanguage("ru")}]).config(["$httpProvider","$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider",function(e,t,n,r){r.strictMode(!1),n.rule(function(e,t){var n=t.path(),r=t.search(),i=n[n.length-1];if("/"!==i){if(r==={}){var o=n+"/";return console.log(o),o}var s=[];return angular.forEach(r,function(e,t){s.push(t+"="+e)}),n+"/?"+s.join("&")}}),t.html5Mode(!0).hashPrefix("!")}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1)}])}(),function(){"use strict";angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,n){e.state("app",{"abstract":!0,controller:"AppCtrl as app",resolve:{svetNewsPromise:["ArticlesServ",function(e){return e.setHomeNewsLive()}],userPromise:["AuthenticationServ",function(e){return e.checkUserStatus()}]},template:"<div ui-view=''></div>"}).state("app.home",{url:"/",controller:"HomeCtrl as home",templateUrl:"scripts/sections/home/views/homeCtrl.html"}).state("app.sign-up",{url:"/sign-up",controller:"SignUpCtrl as signUp",templateUrl:"scripts/auth/views/sign-upCtrl.html",resolve:{currentUser:["userAuth","$q",function(e,t){return t(function(t,n){var r=!!e.profile;r?n("You are already logged in. Logout First"):t()})}]}}).state("app.svet-login",{url:"/svet-login",controller:"SvetLoginCtrl as login",templateUrl:"scripts/auth/views/svet-loginCtrl.html",resolve:{currentUser:["userAuth","$q",function(e,t){return t(function(t,n){var r=!!e.profile;r?n("You are already logged in"):t()})}]}}).state("app.y",{url:"/y",controller:"YCtrl as y",templateUrl:"ad/classified/views/yCtrl.html"})}])}(),function(){"use strict";angular.module("sections.home",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("ad",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.user.ad",{"abstract":!0,url:"/ad",controller:"AdCtrl",templateUrl:"scripts/ad/views/adCtrl.html"}).state("app.user.ad.classified",{url:"/classified",controller:"CustomerClassifiedCtrl",templateUrl:"scripts/auth/views/customer-classifiedCtrl.html"}).state("app.user.ad.promotion",{url:"/promotion",controller:"CustomerAdCtrl as customerAd",templateUrl:"scripts/ad/promotion/views/customer-adCtrl.html"}).state("app.user.ad.start",{url:"/manage-campaign/:id",controller:"StartCampaignCtrl as startCampaign",templateUrl:"scripts/ad/promotion/views/start-campaignCtrl.html"})}])}(),function(){"use strict";angular.module("ad").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("ad").controller("AdCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("blogs",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.blogs",{url:"/blogs",controller:"AllBlogsCtrl",templateUrl:"scripts/blogs/views/all-blogsCtrl.html"}).state("app.blogs.one-blog-article",{url:"/:authorName/:blogId",controller:"OneBlogCtrl",templateUrl:"scripts/blogs/views/one-blogCtrl.html"})}])}(),function(){"use strict";angular.module("blogs").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{"svet-blog":"SVET Blog"}),e.translations("ru",{"svet-blog":"SVET Блог"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("blogs").controller("OneBlogCtrl",["$scope","ArticlesServ","$stateParams","userAuth","SvHtmlValidatorServ",function(e,t,n,r,i){e.user=r.profile,e.userKey=r.key;var o=n.blogId;console.log(o),t.get(o).$loaded().then(function(t){e.post=i.cleanArticle(t)})}])}(),function(){"use strict";angular.module("blogs").controller("AllBlogsCtrl",["BlogsServ","$scope","svetBlogsConst",function(e,t,n){}])}(),function(){"use strict";angular.module("blogs").directive("svBlogsList",["BlogsServ","svetBlogsConst","$sce",function(e,t,n){return{replace:!0,templateUrl:"scripts/blogs/directives/sv-blogs-list.html",scope:{},link:function(r,i,o){e.setBlogsLive().then(function(){r.blogs=t["public"]}),r.safeParsing=function(e){return n.trustAsHtml(e)}}}}])}(),function(){"use strict";angular.module("blogs").factory("BlogsServ",["$q","url","users","$rootScope","$firebaseObject","$firebaseArray","svetBlogsConst",function(e,t,n,r,i,o,s){function a(e){var t=_.where(e,{isPublic:!0,isBlog:!0}),n=r.langEng;t=_.filter(t,function(e){return n?e.tags&&e.tags.indexOf("english")>-1:!e.tags||e.tags&&e.tags.indexOf("english")===-1}),s["public"]=_.sortBy(t,"-timestamp")}var c=new Firebase(t+"articles"),u=o(c);return{setBlogsLive:function(){return e(function(e,t){u.$loaded(function(){a(u),u.$watch(function(){a(u)}),e()})})}}}])}(),function(){"use strict";angular.module("common",["ui.router","flow"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.section",{url:"/sections/:sectionName",controller:"SectionCtrl",templateUrl:"scripts/common/views/sectionCtrl.html"}).state("app.ga",{url:"/svet-analytics-data",controller:"GaCtrl",templateUrl:"scripts/common/views/gaCtrl.html"})}])}(),function(){"use strict";angular.module("common").directive("svHomeLogoLink",["$rootScope","$mdSidenav",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-home-logo-link.html",scope:{},link:function(e,n,r){e.closeSideBar=function(){t("left").close(),t("right").close()}}}}])}(),function(){"use strict";angular.module("common").directive("svGoogleShare",["$location","$timeout",function(e,t){return{templateUrl:"scripts/common/directives/sv-google-share.html",scope:{},link:function(n,r,i){t(function(){n.pageUrl=e.absUrl()},500)}}}])}(),function(){"use strict";angular.module("common").directive("svFadeIn",["$timeout",function(e){return{priority:-1,link:function(e,t,n){e.$watch(n.svFadeIn,function(e,n){e!=n&&(t.animate({opacity:0},400),t.animate({opacity:1},400))})}}}])}(),function(){"use strict";angular.module("common").factory("AWSServ",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i,o){return{getImages:function(n){var r,i=/<key>([^<])+/gi,o=[];return e(function(e,s){var a="https://"+n+".s3-us-west-2.amazonaws.com";t.get(a).then(function(t){var n=t.data;for(r=i.exec(n);null!==r;){if(r){var s=r[0].replace("<Key>","");o.push(s)}r=i.exec(n)}e(o)})})}}}])}(),function(){"use strict";angular.module("common").directive("svImgFramedString",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-img-framed-string.html",scope:{svImg:"@",maxWidth:"@",maxHeight:"@"},link:function(e,t,n){e.maxW=e.maxWidth||250,e.maxH=e.maxHeight||150,t.css("position","relative"),t.css("overflow","hidden"),t.css("max-width",e.maxW+"px"),t.css("max-height",e.maxH+"px");var r=t.find("img");r.css("position","relative"),r.css("display","block"),r.css("height","150px")}}})}(),function(){"use strict";angular.module("common").controller("GaCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("common").directive("svAnalyticsInfo",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-analytics-info.html",scope:{},link:function(e,t,n){gapi.analytics.ready(function(){gapi.analytics.auth.authorize({container:"embed-api-auth-container",clientid:"991720460723-mlnvtm42c5c8b2623r7ing1srdi9n326.apps.googleusercontent.com"});var e=new gapi.analytics.ViewSelector({container:"view-selector-container"});e.execute();var t=new gapi.analytics.googleCharts.DataChart({query:{metrics:"ga:sessions",dimensions:"ga:date","start-date":"30daysAgo","end-date":"yesterday"},chart:{container:"chart-container",type:"LINE",options:{width:"100%"}}});e.on("change",function(e){t.set({query:{ids:e}}).execute()})})}}})}(),function(){"use strict";angular.module("common").directive("svImageThumb",["$state","defimg",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-image-thumb.html",scope:{svImage:"@",linkRoute:"@",params:"="},link:function(n,r,i){n.svImage=n.svImage||t,n.navigate=function(){e.go(n.linkRoute,{id:n.params})};var o=new Image;o.src=n.svImage,o.onload=function(){var e=(o.width,o.height,r.find("i"));e.css({"background-image":"url("+n.svImage+")","background-size":"cover","background-position":"50% 25%",height:"100%",display:"block"})}}}}])}(),function(){"use strict";angular.module("common").directive("svContactInfo",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-contact-info.html",scope:{bgc:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").config(["$translateProvider",function(e){e.directivePriority(10),e.useCookieStorage(),e.translations("en",{chicago:"Chicago",usa:"USA",blog:"Blog","about-us":"About Us","our-clients":"Our Clients","login-title":"Log In to Your Account","not-registered":"Not Registered","registered-users":"Registered Users","required-field":"* Required Field","min-length":"* Minimum length 3 symbols","max-length":"* Maximum length 20 symbols","invalid-email":"* Please enter a valid email","username-field":"This username is already taken","invalid-password":"* Your password must be between 6 and 12 characters long",repost:"Repost","quick-look":"Quick Look","full-description":"More Info",login:"Login",logout:"Logout",edit:"Edit","delete":"Delete",cancel:"Cancel",save:"Save",post:"Post",hide:"Hide",share:"Share",search:"Search",results:"Results",add:"Add",download:"Download","more-pictures":"More Pictures","open-pdf":"Open PDF File","choose-image":"Choose an Image","remove-image":"Remove an Image","home-top":"Home Page Top","home-middle":"Home Page Middle",fname:"First Name",lname:"Last Name","delete-confirm":"Click delete to confirm",uname:"User Name"}),e.translations("ru",{chicago:"Чикаго",usa:"США",blog:"Блог","about-us":"О нас","our-clients":"Наши клиенты","login-title":"Вход","quick-look":"Просмотр","full-description":"Подробнее","login:title":"Авторизация Svet Russian Media Group","not-registered":"Не зарегистрированы","registered-users":"Зарегистрировались","required-field":"* Обязательное Поле","min-length":"* Минимум 3 символа","max-length":"* Максимум  20 символов","invalid-email":"* Пожалуйста, введите корректный адрес","username-field":"Это имя пользователя уже используется","invalid-password":"* Ваш пароль должен содержать от 6 до 20 символов",repost:"Активировать",logout:"Выйти",login:"Войти",edit:"Править","delete":"Удалить",cancel:"Отменить",save:"Сохранить",post:"Опубликовать",hide:"Скрыть",share:"Поделиться",search:"Поиск",results:"Результат",add:"Добавить",download:"Скачать","more-pictures":"Больше фотографий","open-pdf":"Открыть PDF Файл","choose-image":"Выбрать изображение","remove-image":"Удалить изображение","home-top":"Наверу домашней страницы","home-middle":"Внизу домашней страницы",fname:"Имя",lname:"Фамилия",uname:"Имя Пользователя","delete-confirm":'Нажмите на "Удалить" для подтверждения'}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("common").controller("SectionCtrl",["$scope","$sce","$stateParams","svetNews","ArticlesServ",function(e,t,n,r,i){e.sectionName=n.sectionName,r["public"]?e.newsList=r["public"]:i.setHomeNewsLive().then(function(){e.newsList=r["public"]}),e.currentProjectUrl=t.trustAsResourceUrl("http://www.deutschskype.com/american-family-insurance.html")}])}(),function(){"use strict";angular.module("common").directive("svFbLike",["TrailingSlashServ","$location",function(e,t){return{templateUrl:"scripts/common/directives/sv-fb-like.html",scope:{btnAction:"@"},link:function(n,r,i){n.pageUrl=e.add(t.absUrl()),console.log(n.pageUrl),n.profiles=n.profiles||"false",n.btnAction=n.btnAction||"like"}}}])}(),function(){"use strict";angular.module("common").directive("svFbShare",["TrailingSlashServ","$location",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-fb-share.html",scope:{},link:function(n,r,i){n.pageUrl=e.add(t.absUrl())}}}])}(),function(){"use strict";angular.module("common").directive("svFbFollow",["$location",function(e){return{replace:!0,templateUrl:"scripts/common/directives/sv-fb-follow.html",scope:{},link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("common").directive("svImageScale",["$window",function(e){function t(e,t,n,r){var i=.64,o=.9,s=e.naturalHeight,a=e.naturalWidth;if(s>=a){var c=(i*n).toFixed(0);t.css("height",c+"px"),t.css("width","auto"),angular.element(e).css("height","100%"),e.style.width="auto"}a>s&&(t.css("width",(o*r).toFixed(0)+"px"),t.css("height","auto"),angular.element(e).css("height","auto"),e.style.width="100%")}return{link:function(e,n,r){var i=1e3,o=window.innerHeight,s=window.innerWidth>i?i:window.innerWidth;$(window).resize(function(){o=window.innerHeight,s=window.innerWidth>i?i:window.innerWidth,e.$apply(function(){t(a,n,o,s)})});var a=n.find("img")[0];a.onload=function(){t(a,n,o,s)}}}}])}(),function(){"use strict";angular.module("common").value("s3",{files:[]}).value("galleryModal",{shown:!1}).directive("svOnePhotoGallery",["AWSServ","galleryModal","$location","$mdDialog","dt","$timeout","$state",function(e,t,n,r,i,o,s){return{replace:!0,templateUrl:"scripts/common/directives/sv-one-photo-gallery.html",scope:{activeImg:"="},link:function(a,c,u){function l(e){i.vm=e,r.show({controller:d,templateUrl:"scripts/common/views/photo-gallery-modal.html"})}function d(e,r,i,a){e.awsBase="https://s3-us-west-2.amazonaws.com/kohl/",e.imgIndex=i.vm.currentIndex,e.files=i.vm.images;var c=e.files.length-1;e.currentImage=e.awsBase+e.files[e.imgIndex],e.nextSvImage=function(){var t=e.imgIndex;t++,t>c&&(t=0),e.imgIndex=t,o(function(){e.currentImage=e.awsBase+e.files[e.imgIndex],s.go("app.events.kohl2015.photo-gallery",{photoId:t})},m)},e.prevSvImage=function(){var t=e.imgIndex;t--,t<0&&(t=c),e.imgIndex=t,o(function(){e.currentImage=e.awsBase+e.files[e.imgIndex],s.go("app.events.kohl2015.photo-gallery",{photoId:t})},m)},e.hide=function(){r.hide(),t.state=!1,n.path(f(n.path()))}}function f(e,t){var n=e.lastIndexOf("/")+1;return e=e.substr(0,n),_.isUndefined(t)||(e+=t),e}var m=400,v=!0;a.bucketUrl="https://s3-us-west-2.amazonaws.com/kohl/",e.getImages("kohl").then(function(e){if(a.images=[],v)for(var t=e.length-1;t>=0;t--){var n=e[t];a.images.push(n)}else a.images=e;a.activeImg&&a.showGalleryModal(a.activeImg)}),a.showGalleryModal=function(e){if(!t.state){var n={images:a.images,currentIndex:e};t.state=!0,o(function(){s.go("app.events.kohl2015.photo-gallery",{photoId:e},{reload:!1}).then(function(){l(n)})},m)}},d.$inject=["$scope","$mdDialog","dt","s3"]}}}])}(),function(){"use strict";angular.module("common").directive("svKohlEventReport",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-kohl-event-report.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svAnimateOnIndexChange",["$timeout",function(e){return{priority:-1,link:function(t,n,r){t.$watch(r.svAnimateOnIndexChange,function(t,r){t!=r&&(n.addClass("changed"),e(function(){n.removeClass("changed")},1e3))})}}}])}(),function(){"use strict";angular.module("common").directive("svTestRepoInformer",["domain",function(e){return{replace:!0,templateUrl:"scripts/common/directives/sv-test-repo-informer.html",scope:{},link:function(t,n,r){t.isTestDomain="test"===e}}}])}(),function(){"use strict";angular.module("common").directive("svImgBackground",["$state","defimg",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-img-background.html",scope:{svImage:"=",linkRoute:"@",params:"="},link:function(n,r,i){n.svImage=n.svImage||t,n.navigate=function(){e.go(n.linkRoute,{id:n.params})};var o=new Image;o.src=n.svImage,o.onload=function(){var e=(o.width,o.height,r.find("i"));e.css({"background-image":"url("+n.svImage+")","background-size":"cover","background-position":"50% 25%",height:"100%",display:"block"})}}}}])}(),function(){"use strict";angular.module("common").factory("ImageValidationServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{validate:function(e,t){var n=[];return t.svMaxSize&&e.size>1048576*t.svMaxSize&&n.push("Image exceeds max size limit."),t.svMinWidth&&e.width<t.svMinWidth&&n.push("Image width is below  the limit"),t.svMinHeight&&e.height<t.svMinHeight&&n.push("Image height is below the limit"),t.svMaxWidth&&e.width>t.svMaxWidth&&(n.push("Should be in "+t.svMinWidth+"px - "+t.svMaxWidth+"px range."),n.push("Image width is above  the limit")),t.svMaxHeight&&e.height>t.svMaxHeight&&(n.push("Should be in "+t.svMinHeight+"px - "+t.svMaxHeight+"px range."),n.push("Image height is above the limit")),n}}}])}(),function(){"use strict";angular.module("common").directive("svBanBtn",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-ban-btn.html",scope:{cl:"="},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svStatusLabel",function(){return{templateUrl:"/scripts/common/directives/sv-status-label.html",scope:{labelTitle:"@",fs:"@",tc:"@",bgc:"@",labelPadding:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svQuickLookBtn",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-quick-look-btn.html",scope:{modalMethod:"&"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svZeroLengthNotice",["$filter","userAuth",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-zero-length-notice.html",scope:{list:"=",filter:"@",filterValue:"@",item:"@",ownerField:"@"},link:function(n,r,i){n.$watchCollection("list",function(r,i){if(n.filter)if(n.ownerField){var o=e(n.filter,n.filterValue)(n.list);n.filteredList=_.filter(o,function(e){return e[n.ownerField]===t.key})}else n.filteredList=e(n.filter,n.filterValue)(n.list);else n.filteredList=_.filter(n.list,function(e){return e[n.ownerField]===t.key})})}}}])}(),function(){"use strict";angular.module("common").value("confirmMessage",{msg:"Are you sure?"}).directive("svConfirmDeletion",["$mdDialog","confirmMessage","toastr","$parse",function(e,t,n,r){return{priority:-1,link:function(n,i,o){i.on("click",function(i){i.stopImmediatePropagation(),i.preventDefault();var s="Delete "+o.svConfirmDeletion+"?";t.msg=s,e.show({controller:["$scope","$mdDialog","confirmMessage",function(e,t,n){e.message=n.msg,e["delete"]=function(){t.hide(!0)},e.cancel=function(){t.cancel()}}],templateUrl:"scripts/common/views/modalDeleteConfirm.html"}).then(function(){var e=r(o.ngClick);e(n)})})}}}])}(),function(){"use strict";angular.module("common").value("confirmBanMessage",{msg:"Are you sure?"}).directive("svConfirmBan",["$mdDialog","confirmBanMessage","toastr","$parse","ClassifiedServ",function(e,t,n,r,i){return{priority:-1,link:function(n,i,o){i.on("click",function(i){i.stopImmediatePropagation(),i.preventDefault();var s="Ban "+o.svConfirmBan+"?";t.msg=s,e.show({controller:["$scope","$mdDialog","confirmBanMessage",function(e,t,n){e.message=n.msg,e.banByManager=function(){console.log("run here sv-confirm-ban.js"),t.hide(!0)},e.cancel=function(){t.cancel()}}],templateUrl:"scripts/common/views/modalBanConfirm.html"}).then(function(){console.log("Promise");var e=r(o.ngClick);e(n)})})}}}])}(),function(){"use strict";angular.module("common").directive("svFormVal",["$compile",function(e){return{restrict:"A",priority:100,require:"?^form",compile:function(t,n){var r=t.find("input"),i=t.find("textarea[required]"),o=_.union(r,i),s=_.pluck(o,"name"),a=_.compact(_.map(r,function(e){var t=angular.element(e).parent("lx-text-field");if(t.length>0)return t})),c=t.find("md-radio-group"),u=c.attr("name"),l=t.find("md-select"),d=l.attr("name");return function(t,n,r,i){function f(n,r){var i=m+"."+r,o=i+".$touched",s=i+".$error",a=m+".$submitted",c="<div ng-if='"+o+"|| "+a+"'ng-messages='"+s+"'><div ng-messages-include='scripts/common/templates/form-error-messages.html'></div></div>",u=e(c)(t);angular.element(n).after(u)}var m=i.$name,v=a.length>0?a:o;angular.forEach(v,function(e,t){f(e,s[t])}),f(c,u),f(l,d)}}}}])}(),function(){"use strict";angular.module("common").directive("svSvetLabel",["$state",function(e){return{templateUrl:"scripts/common/directives/sv-svet-label.html",scope:{routeName:"@",iconType:"@",iconName:"@",params:"=",fs:"@",tc:"@",bgc:"@",cursorType:"@",sectionTitle:"@",textDecoration:"@",labelPadding:"@"},link:function(t,n,r){t.textDecoration=t.textDecoration||"underline",t.fs="fs-caption",t.tc=t.tc||"tc-grey-500",t.bgc=t.bgc||"bgc-grey-300",t.labelPadding=t.labelPadding||"2px 4px",t.navigateTo=function(){e.go(t.routeName,t.params)}}}}])}(),function(){"use strict";angular.module("common").directive("svGofundmeThumb",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-gofundme-thumb.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svShareBtn",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-share-btn.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svStarRating",function(){return{template:"<ul class='rating' ng-class='{readonly: readonly}'>  <li ng-repeat='star in stars' ng-class='star' ng-click='toggle($index)'>    <i class='fa fa-star'></i>  </li></ul>",scope:{ratingValue:"=ngModel",max:"=?",onRatingSelected:"&?",readonly:"=?"},link:function(e,t,n){function r(){e.stars=[];for(var t=0;t<e.max;t++)e.stars.push({filled:t<e.ratingValue})}void 0==e.max&&(e.max=5),e.toggle=function(t){void 0!=e.readonly&&0!=e.readonly||(e.ratingValue=t+1,e.onRatingSelected({rating:t+1}))},e.$watch("ratingValue",function(e,t){t&&r()})}}})}(),function(){"use strict";angular.module("common").directive("svLumxUsersDropdown",function(){return{templateUrl:"scripts/common/directives/sv-lumx-users-dropdown.html",scope:{btnTitle:"@",actionCounter:"@",userAvatar:"@",userName:"@",userFirstName:"@",userLastName:"@",iconType:"@",iconName:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svLumxButton",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-lumx-button.html",scope:{bntUrl:"@",methodClick:"&",btnSize:"@",btnType:"@",btnColor:"@",textColor:"@",bgColor:"@",btnTitle:"@",iconType:"@",iconName:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svLinkBack",["userAuth","$state",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-link-back.html",scope:{},link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("common").factory("HtmlParseServ",["$q","$http","$sanitize","$sce",function(e,t,n,r){function i(e){var t=$("<div></div>");t.html(e);for(var r=_.take($(".zoomMe",t).find("p"),7),i="",o=0;o<r.length;o++){var s,a=r[o];try{if(s=n(a.outerHTML),~s.indexOf("background-color"))continue;s.replace(/\&\#34;/g,'"')}catch(c){console.log(c);continue}1===o&&(i+="<br/>"),i+=s}var u=$(".topintend",t).text().replace("Метки:","").trim();return{body:i.trim(),tags:u}}return{getFullNews:function(n){return e(function(e,r){t.get(n).then(function(t){var n=i(t.data);e(n)})})},getMultipleFullNews:function(t){var n=this,r=_.pluck(t,"link"),i=[];return r.forEach(function(e){i.push(n.getFullNews(e))}),e.all(i)}}}])}(),function(){"use strict";angular.module("common").factory("TagsServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{get:function(){},getRandomTags:function(){for(var e=[],t=0;t<5;t++)e.push(faker.lorem.words(1));return e.join(", ")}}}])}(),function(){"use strict";angular.module("common").factory("FormattedDateServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{get:function(){},getFormattedDate:function(){var e=new Date;return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()}}}])}(),function(){"use strict";angular.module("common").factory("NewsGeneratorServ",["SvobodaSaveToDbServ","HtmlParseServ","$http","$q","$rootScope","$firebaseArray","url",function(e,t,n,r,i,o,s){var a=["epiqq"],c=[];return{getCategories:function(e){return e?_.first(c,e):c},getPoliticalNews:function(e,t){e=e||2;for(var n=r.defer(),i="http://www.svoboda.org/api/",o=[],s=[],c=0;c<a.length;c++){var u=a[c],l=i+u;o.push(this.getPoliticalNewsWithImages(l).then(function(e){s.push(e)}))}return r.all(o).then(function(){n.resolve(s[0])}),n.promise},getGenerateNewsWithImages:function(e,t){for(var n=r.defer(),i="http://www.svoboda.org/api/",o=[],s=[],c=0;c<a.length;c++){var u=a[c],l=i+u;o.push(this.getNewsWithImages(l).then(function(e){s.push(e)}))}return r.all(o).then(function(){n.resolve(s[0])}),n.promise},getNewsWithImages:function(i,o,s){function a(e){for(var t=0,n=0,r=[];;){if(t=e.indexOf("enclosure",t),t===-1)break;t=e.indexOf("http",t),n=e.indexOf('"',t);var i=e.substring(t,n);r.push(i),t=n}return r}function c(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[n];r.img=i}return e}var u=r.defer(),l=n.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json_xml&num=50&callback=JSON_CALLBACK&q="+encodeURIComponent(i));return l.then(function(n){var r=n.data.responseData.xmlString,i=a(r),o=n.data.responseData.feed.entries;o=c(o,i),t.getMultipleFullNews(o).then(function(t){for(var n=0;n<o.length;n++){var r=o[n],i=t[n].body,s=t[n].tags;r.body=i,r.tags=s}e.cleanSvoboda().then(function(){e.saveAll(o).then(function(){u.resolve()})})})})["catch"](function(e){u.reject("Error in rss request. Due to: "+e)}),u.promise},getPoliticalNewsWithImages:function(e,i,o){function s(e){for(var t=0,n=0,r=[];;){if(t=e.indexOf("enclosure",t),t===-1)break;t=e.indexOf("http",t),n=e.indexOf('"',t);var i=e.substring(t,n);r.push(i),t=n}return r}function a(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[n];r.img=i}return e}var c=r.defer(),u=n.jsonp("//ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json_xml&num=50&callback=JSON_CALLBACK&q="+encodeURIComponent(e));return u.then(function(e){var n=e.data.responseData.xmlString,r=s(n),i=e.data.responseData.feed.entries;i=a(i,r);var o=_.shuffle(i)[0];t.getFullNews(o.link).then(function(e){o.body=e.body,o.tags=e.tags,c.resolve(o)})})["catch"](function(e){c.reject("Error in rss request. Due to: "+e)}),c.promise}}}])}(),function(){"use strict";angular.module("common").filter("sectionNews",function(){return function(e,t,n){if(!e||!t)return e;if("svet-recommends"===t)var r=_.filter(e,function(e){return e.svetRecommends});else var r=_.filter(e,function(e){return e.section.toLowerCase()===t.toLowerCase()});if(n)var r=_.filter(e,function(e){return e.section.toLowerCase()!==t.toLowerCase()});return r}})}(),function(){"use strict";angular.module("common").directive("svBottomSheetHandler",["$mdBottomSheet",function(e){return{link:function(t,n,r){n.on("touchstart",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html"})})}),n.on("click",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html"})})})}}}])}(),function(){"use strict";angular.module("common").directive("svNavBtn",["$rootScope","$mdSidenav",function(e,t){return{replace:!0,templateUrl:"scripts/common/directives/sv-nav-btn.html",scope:{url:"@",title:"@",customClass:"@",iconType:"@",color:"@",btnStyle:"@",btnSize:"@",bgc:"@",txtColor:"@",customStyle:"@",icon:"@"},link:function(e,n,r){e.closeSideBar=function(){t("left").close(),t("right").close()}}}}])}(),function(){"use strict";angular.module("common").directive("svNavLink",["$mdSidenav",function(e){return{templateUrl:"/scripts/common/directives/sv-nav-link.html",scope:{url:"@",stitle:"@",side:"@",icon:"@",someObject:"=",someString:"@",someExpr:"&"},link:function(t,n,r){t.closeSideBar=function(){e("left").close(),e("right").close()}}}}])}(),function(){"use strict";angular.module("common").directive("svProfileSubhead",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-profile-subhead.html",scope:{subheadTitle:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svProfileTitle",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-profile-title.html",scope:{headerTitle:"@"},link:function(e,t,n){e.headerTitle=_.snakeCase(_.startCase(e.headerTitle))}}})}(),function(){"use strict";angular.module("common").directive("svTabSwipe",function(){return{link:function(e,t,n,r){t.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()})}}})}(),function(){"use strict";angular.module("common").directive("svNavBarMedia",["$mdMedia",function(e){return{link:function(t,n,r){t.$watch(function(){return e("gt-md")},function(e){e?(n.css("height","auto"),n.css("min-height","76px")):n.css("height","42px")})}}}])}(),function(){"use strict";angular.module("common").directive("svLoader",function(){return{templateUrl:"scripts/common/directives/sv-loader.html"}})}(),function(){"use strict";angular.module("common").directive("svReadMore",["$state",function(e){return{replace:!0,templateUrl:"scripts/common/directives/sv-read-more.html",scope:{news:"=",routeName:"@",svParams:"=",readMore:"@"},link:function(t,n,r){t.navigate=function(){e.go(t.routeName,{id:t.svParams})}}}}])}(),function(){"use strict";angular.module("common").factory("TrailingSlashServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{add:function(e){return"/"!==_.last(e)&&(e+="/"),e}}}])}(),function(){"use strict";angular.module("common").directive("svSidenavTitle",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-sidenav-title.html",scope:{iconType:"@",iconName:"@",title:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("common").directive("svImgFramed",function(){return{replace:!0,templateUrl:"scripts/common/directives/sv-img-framed.html",scope:{svImg:"=",maxWidth:"=",maxHeight:"="},link:function(e,t,n){e.maxW=e.maxWidth||600,e.maxH=e.maxHeight||400,t.css("position","relative"),t.css("overflow","hidden"),t.css("max-width",e.maxW+"px"),t.css("max-height",e.maxH+"px");var r=t.find("img");r.css("position","relative"),r.css("width","100%"),r.css("display","block")}}})}(),function(){"use strict";angular.module("common").directive("svLeftClickHandler",function(){return{link:function(e,t,n){t.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleLeft()})}),t.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleLeft()})})}}})}(),function(){"use strict";angular.module("common").directive("svRightClickHandler",function(){return{link:function(e,t,n){t.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){
e.toggleRight()})}),t.on("click",function(t){t.preventDefault(),t.stopPropagation(),e.$apply(function(){e.toggleRight()})})}}})}(),function(){angular.module("common").config(["$mdThemingProvider",function(e){var t=e.extendPalette("grey",{A100:"#474341"});e.definePalette("svet",t),e.theme("default").primaryPalette("svet",{"default":"400","hue-1":"200","hue-2":"600","hue-3":"A100"}).backgroundPalette("grey",{"default":"50"}).accentPalette("red",{"default":"600","hue-1":"500"})}])}(),function(){angular.module("common").config(["$mdIconProvider",function(e){e.defaultIconSet("./assets/svg/avatars.svg",128).icon("sv-menu","./assets/svg/menu.svg",24).icon("sv-close","./assets/svg/close.svg",24).icon("share","./assets/svg/share.svg",24).icon("google_plus","./assets/svg/google_plus.svg",512).icon("hangouts","./assets/svg/hangouts.svg",512).icon("twitter","./assets/svg/twitter.svg",512).icon("phone","./assets/svg/phone.svg",512)}])}(),function(){"use strict";var e="svet";angular.module("common").constant("routesRadioShow",["app","app.home"]).constant("domain","svet"===e?"production":"test").constant("url","https://"+e+".firebaseio.com/").constant("users","https://"+e+".firebaseio.com/user-management/users/").constant("corporate","https://"+e+".firebaseio.com/events/corporate/").constant("ads","https://"+e+".firebaseio.com/ads/").constant("userAuth",{}).constant("youtubeBase","https://www.youtube.com/embed/").constant("lastEditorPost",{}).constant("svetNews",{}).constant("svetBlogsConst",{}).constant("svetEventsConst",{}).constant("svetPost",{}).constant("classified",{}).constant("feedback",{}).constant("viewModalConst",{}).constant("dt",{}).constant("classifiedInterval",63e3).service("urlUsers",["url",function(e){this.url=e+"/user-management/users/"}]).constant("SOCIAL_PLUGINS",["like","share-button","send","post","video","comments","page","follow"]).value("weather","https://publicdata-weather.firebaseio.com/chicago").value("avatar","/img/auth/user.png").value("defimg","/img/common/picture-thumb.png").value("alex","/img/auth/alex-sepia.jpg")}(),function(){"use strict";angular.module("sections.home").factory("ImageSizeServ",["$q",function(e){return{getScaledHeight:function(t,n){return e(function(e,r){var i=new Image;i.onload=function(){var t=i.width,r=i.height,o=n/t;e(Math.floor(r*o))},i.src=t})}}}])}(),function(){"use strict";angular.module("common").directive("svModalWindowSizeMedia",["$mdMedia",function(e){return{link:function(t,n,r,i){return{link:function(t,n,r){console.log("run here sv-modal-window-size-media.js"),t.$watch(function(){return e("sm")},function(e){e?(n.css("min-height","100%"),n.css("min-width","100%")):(n.css("height","auto"),n.css("width","auto"))})}}}}}])}(),function(){"use strict";angular.module("auth",["ui.router","flow"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("auth",[]).config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{"terms-conditions":"Svet Russian Media Group Statement of Rights and Responsibilities","comment-auth":"Please log in to leave a comment","feedback-auth":"Please log in to leave a feedback","all-rights-reserved":"All rights reserved","all-registered-users":"Full List","account-status":"Account Status","business-account":"Business Account","reader-account":"Reader Account",username:"User Name",email:"Email",password:"Password",register:"Register","register-account":"Please Register","new-user":"if you do not have an account","by-registering":"By clicking Register","registering-conditions":"I have read and agree to the Svet Russian Media Group Website Terms & Conditions ","already-registered":"Already registered?",registration:"Registration","author-dashboard":"Dashboard","author-articles":"My Articles","author-drafts":"My Drafts","create-article":"Create an Article",dashboard:"Dashboard","my-profile":"My Profile","date-created":"Date Created","showing-stat":"Showing Statistics",unique:"Unique",total:"Total","my-articles":"My Articles","my-blog":"My Blog","all-articles":"All Articles","my-drafts":"Drafts","my-friends":"My Friends","svet-friends":"Svet Friends",settings:"Settings",statistics:"Statistics",comments:"Comments",bookmarks:"Bookmarks","manager-dashboard":"Manager Dashboard",users:"Users","users-account-requests":"Users Business Account Requests","all-users":"All Users","all-notifications":"All Notifications",notifications:"Notifications",clients:"Clients",readers:"Readers",customers:"Customers",customer:"Customer",authors:"Authors",author:"Author","reader-profile":"Reader Profile","reader-profile-settings":"Reader Profile Settings",invitations:"Invitations","find-people":"Find People",subscriptions:"Subscriptions","recovery-header":"Svet Russian Media Group Password Recovery","forgot-pass":"Forgot password?","email-recovery":"Email used for registration","send-temp-pass":"Send","profile-settings":"Profile Settings"}),e.translations("ru",{"terms-conditions":"Правила пользования интерактивными ресурсами сайта Svet Russian Media Group","comment-auth":"Авторизируйтесь, чтобы оставить комментарий","feedback-auth":"Авторизируйтесь, чтобы оставить отзыв","all-rights-reserved":"Все права защищены","all-registered-users":"Весь Список","account-status":"Статус Профайла","business-account":"Бизнес Профайл","reader-account":"Профайл Читателя",username:"Контактное Имя",email:"Электронный Адрес",password:"Пароль",register:"Зарегистрироваться","register-account":"Зарегистрируйтесь","new-user":"Eсли Вы новый пользователь","by-registering":"Регистрируясь, вы принимаете","registering-conditions":"Я прочитал и принимаю условия использования портала Svet Russian Media Group","already-registered":"Уже зарегистрированы",registration:"Регистрация","author-dashboard":"Панель Управления","author-articles":"Мои Статьи","author-drafts":"Мои Черновики",statistics:"Статистика",dashboard:"Панель Управления","my-profile":"Мой Профайл","date-created":"Дата создания","showing-stat":"Статистика показов",unique:"Уникальные",total:"Всего","my-articles":"Мои Статьи","my-blog":"Мой Блог","all-articles":"Все Статьи","my-drafts":"Черновики","my-friends":"Мои Друзья","svet-friends":"Друзья Svet ","create-article":"Добавить статью",settings:"Настройки",comments:"Комментарии",bookmarks:"Закладки","manager-dashboard":"Панель Управления Менеджера",users:"Юзеры","users-account-requests":"Запросы Пользователей (Бизнес Профайл)","all-users":"Все Юзеры","all-notifications":"Все Оповещения",notifications:"Оповещения",clients:"Клиенты",readers:"Читатели",customers:"Клиенты",customer:"Клиент",authors:"Авторы",author:"Автор","reader-profile":"Профайл Читателя","reader-profile-settings":"Настройки Профайла Читателя",invitations:"Приглашения","find-people":"Поиск Людей",subscriptions:"Подписки","forgot-pass":"Забыли Пароль?","recovery-header":"Восстановлиение Пароля","email-recovery":"Email используемый при регистрации","send-temp-pass":"Отослать","profile-settings":"Настройки Профайла"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("auth").controller("SignUpCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth").controller("SvetLoginCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth").controller("CustomerClassifiedCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth").directive("svProfileType",["userAuth","$state",function(e,t){return{templateUrl:"scripts/auth/directives/sv-profile-type.html",link:function(n,r,i){n.goToDashboard=function(){"manager"===e.profile.role?t.go("app.manager.dashboard",{uid:e.key}):t.go("app.user.dashboard",{uid:e.profile.userName})}}}}])}(),function(){"use strict";angular.module("auth").directive("svUniqueUsername",["$q","$timeout","UserUniqueServ",function(e,t,n){return{require:"?^ngModel",link:function(t,r,i,o){o.$asyncValidators.svUniqueUsername=function(r,i){return r=r.trim().replace(/\s+/g,"-").toLowerCase(),r===t.oldUserName?e.when(!0):n.isUserNameUnique(r)},o.$formatters.push(function(e){return e.replace(/\s+/g,"-").toLowerCase()}),o.$parsers.push(function(e){return e.replace(/\s+/g,"-").toLowerCase()})}}}])}(),function(){"use strict";angular.module("auth").directive("svRequestBusinessAccountBtn",["RequestServ","userAuth","toastr",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-request-business-account-btn.html",scope:{},link:function(r,i,o){r.user=t,r.cancelRequest=function(){e.cancelRequest(t.key).then(function(){n.warning("Your request for Svet Russian Media Group  corporate account has been canceled")})},r.submitRequest=function(){e.submitRequest(t.key).then(function(){n.info("Your request for Svet Russian Media Group  submitted")})}}}}])}(),function(){"use strict";angular.module("auth").directive("svPdfSubscription",["PdfSubscriptionsServ","userAuth",function(e,t){return{replace:!0,templateUrl:"scripts/auth/directives/sv-pdf-subscription.html",scope:{},link:function(n){n.user=t.profile;var r=e.getObjectRef();r&&(n.requestSubmited=!0,r.$bindTo(n,"subscription").then(function(){n.requestSubmited=!1})["catch"](function(e){n.requestSubmited=!1}))}}}])}(),function(){"use strict";angular.module("auth").directive("svSocialProvider",["AuthenticationServ","$state","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-social-provider.html",scope:{provider:"@",icon:"@"},link:function(r,i,o){r.icon=r.icon||r.provider,r.loginProvider=function(r){r=r.toLowerCase().replace("+",""),e.authWithProvider(r).then(function(){n.profile&&n.profile.isManager()?t.go("app.manager.dashboard",{uid:n.key}):t.go("app.user.dashboard",{uid:n.profile.userName})})}}}}])}(),function(){"use strict";angular.module("auth").directive("svFormSocialButtons",function(){return{replace:!0,templateUrl:"scripts/auth/directives/sv-form-social-buttons.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("auth").directive("svSignUpForm",["ProfileServ","$state","toastr","AuthenticationServ","$mdDialog",function(e,t,n,r,i){return{replace:!0,templateUrl:"scripts/auth/directives/sv-sign-up-form.html",scope:{headerTitle:"@",name:"@",register:"@",registering:"@",conditions:"@",registered:"@",login:"@"},controller:["$scope",function(o){function s(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}o.user={userName:"",email:"",password:""},o.termsConditionsModal=function(){i.show({controller:s,templateUrl:"scripts/auth/views/terms-conditions.html"})},s.$inject=["$scope","$mdDialog"],o.createSvetUser=function(){return o.signUpForm.$invalid?(o.signUpForm.userName.$touched=!0,o.signUpForm.email.$touched=!0,void(o.signUpForm.password.$touched=!0)):(o.user.userName=o.user.userName.replace(/\s+/g,"-").toLowerCase(),void e.createSvetUser(o.user.email,o.user.password,o.user.userName).then(function(){r.svetLogin(o.user.email,o.user.password).then(function(e){t.go("app.user.dashboard",{uid:e.userName})})})["catch"](function(e){n.error(e.message),o.signUpForm.email.$invalid=!0,o.signUpForm.email.$touched=!0}))}}],link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("auth").directive("svLoginForm",["toastr","$state","userAuth","AuthenticationServ",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/directives/sv-login-form.html",scope:{headerTitle:"@",loginBtn:"@",registerAccount:"@",newUser:"@"},link:function(i,o,s){i.user={email:"",password:""},i.singIn=function(){r.svetLogin(i.user.email,i.user.password).then(function(e){n.profile.isManager()?t.go("app.manager.dashboard",{uid:n.key}):n.profile.isAuthor()?t.go("app.user.news.articles",{uid:n.profile.userName}):t.go("app.user.dashboard",{uid:n.profile.userName})})["catch"](function(t){e.error(t.message)})}}}}])}(),function(){"use strict";angular.module("auth").directive("svAuthBtn",["userAuth","AuthenticationServ","AgentServ","$state","$mdMedia","toastr",function(e,t,n,r,i,o){return{templateUrl:"scripts/auth/directives/sv-auth-btn.html",replace:!0,link:function(o){o.isIe=n.isIe(),o.$watchCollection(function(){return e.profile},function(e,t){e!==t&&(o.user=e)}),o.loginProvider=function(n){t.authWithProvider(n).then(function(){e.profile&&e.profile.isManager()&&r.go("app.manager.users",{uid:e.key}),e.profile&&e.profile.isCustomer()&&r.go("app.user.ad.promotion",{uid:e.profile.userName}),e.profile&&e.profile.isReader()&&r.go("app.user.dashboard",{uid:e.profile.userName})})},o.logout=function(){t.logout(),r.go("app.home")},o.$watch(function(){return i("gt-md")},function(e){o.gtMd=e}),o.$watch(function(){return i("gt-sm")},function(e){o.gtSm=e}),o.$watch(function(){return i("sm")},function(e){o.sm=e})}}}])}(),function(){"use strict";angular.module("auth").directive("svForgotPass",["$mdDialog","toastr","AuthenticationServ",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/directives/sv-forgot-pass.html",scope:{},link:function(r,i,o){function s(e,r){e.sendPasswordRecovery=function(r){n.resetPassword(r).then(function(){t.info("Password reset email sent successfully!"),e.hide(),e.user.email=""})["catch"](function(e){t.error("Error: ",e)})},e.hide=function(){r.hide()},e.cancel=function(){r.cancel()},e.answer=function(e){r.hide(e)}}r.showPasswordModal=function(){e.show({controller:s,templateUrl:"scripts/auth/views/password-recovery.html"})},s.$inject=["$scope","$mdDialog"]}}}])}(),function(){"use strict";angular.module("auth").factory("ProfileLiveServ",["$q","url","users","$firebaseObject","ProfileExtentionServ","$firebaseArray","userAuth",function(e,t,n,r,i,o,s){var a,c=new Firebase(n);return{setBinding:function(t){return e(function(e,n){var o=r(c.child(t).child("profile"));o.$loaded(function(){s.profile=i.extend(o),s.key=t,a=o.$watch(function(e){s.profile=i.extend(o)}),e(!0)})})},unbind:function(){a(),s.profile=null,s.key=null}}}])}(),function(){"use strict";angular.module("auth").factory("AuthenticationServ",["$q","url","$firebaseAuth","ProfileServ",function(e,t,n,r){var i=new Firebase(t),o=n(i);return{checkUserStatus:function(){return e(function(e,t){var n=o.$getAuth();n?r.getProfile(n).then(function(t){e(t)}):e(null)})},authWithProvider:function(t){return e(function(e,n){o.$authWithOAuthPopup(t,{scope:"email"}).then(function(t){r.getProfile(t).then(function(t){e(t)})["catch"](function(e){n(e)})})["catch"](function(e){console.error("Authentication failed:",e)})})},svetLogin:function(t,n){return e(function(e,i){o.$authWithPassword({email:t,password:n}).then(function(t){r.getProfile(t).then(function(t){e(t)})["catch"](function(e){i(e)})})["catch"](function(e){i(e)})})},logout:function(){o.$unauth(),r.cleanProfile()},resetPassword:function(e){return o.$resetPassword({email:e})}}}])}(),function(){"use strict";angular.module("sections.home").factory("AgentServ",["$window",function(e){return{isIe:function(){var t=e.navigator.userAgent;return t.indexOf("Trident")>-1||t.indexOf("MSIE")>-1}}}])}(),function(){"use strict";angular.module("auth").factory("UserUniqueServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.auth.google&&i.auth.google.id===e.google.id)return i;if(i.auth.svet&&i.auth.svet.email.toLowerCase()===e.google.email.toLowerCase()){var o=r(c.child(i.$id));return o.$loaded().then(function(){o.auth.google=e,o.profile.avatar=o.profile.avatar?o.profile.avatar:e.google.cachedUserProfile.picture,o.$save()}),i}}}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.auth&&i.auth.facebook&&i.auth.facebook.id===e.facebook.id)return i;if(i.auth&&i.auth.svet&&i.auth.svet.email&&e.facebook&&e.facebook.email&&i.auth.svet.email.toLowerCase()===e.facebook.email.toLowerCase()){var o=r(c.child(i.$id));return o.$loaded().then(function(){o.auth.facebook=e,o.profile.avatar=o.profile.avatar?o.profile.avatar:e.facebook.cachedUserProfile.picture.data.url,o.$save()}),i}}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(r.auth.svet&&r.auth.svet.email.toLowerCase()===e.password.email.toLowerCase())return r}}var c=new Firebase(n);return{findDbProfile:function(e,t){var n;if("google"===e.provider){n=o(e,t)}if("facebook"===e.provider){n=s(e,t)}if("password"===e.provider){n=a(e,t)}return n},isUserNameUnique:function(t){return e(function(e,r){var o=i(new Firebase(n));o.$loaded().then(function(){for(var n=0;n<o.length;n++){var i=o[n];i.profile.userName&&i.profile.userName.toLowerCase()===t.toLowerCase()&&r()}e()})})}}}])}(),function(){"use strict";angular.module("auth").factory("RequestServ",["$q","users","$firebaseObject","$firebaseArray",function(e,t,n,r){return{submitRequest:function(r){return e(function(e,i){var o=t+r,s=n(new Firebase(o));s.$loaded().then(function(){s.profile.requestCorporateSubmited={submitted:!0,submittedDate:moment().format("x"),accepted:!1,rejected:!1},s.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),i(e)})})},cancelRequest:function(r){return e(function(e,i){var o=t+r+"/profile/requestCorporateSubmited",s=n(new Firebase(o));s.$loaded().then(function(){s.$remove(),s.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),i(e)})})},acceptRequest:function(r){return e(function(e,i){var o=t+r+"/profile",s=n(new Firebase(o));s.$loaded().then(function(){s.requestCorporateSubmited.accepted=!0,s.requestCorporateSubmited.rejected=!1,s.requestCorporateSubmited.decisionDate=moment().format("x"),s.role="customer",s.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),i(e)})})},rejectRequest:function(r){return e(function(e,i){var o=t+r+"/profile",s=n(new Firebase(o));s.$loaded().then(function(){s.requestCorporateSubmited.rejected=!0,s.requestCorporateSubmited.accepted=!1,s.requestCorporateSubmited.decisionDate=moment().format("x"),s.role="reader",s.$save().then(function(t){e(t)})})["catch"](function(e){console.log(userid+"does not exists"),i(e)})})},getAllRequests:function(){return e(function(e,n){var i=r(new Firebase(t)),o=[];i.$loaded().then(function(){for(var t=0;t<i.length;t++){var n=i[t];n.profile.requestCorporateSubmited&&o.push(n)}e(o)})["catch"](function(e){console.log(userid+"does not exists"),n(e)})})}}}])}(),function(){"use strict";angular.module("auth").factory("ProfileServ",["$q","$firebaseObject","$firebaseArray","$firebaseAuth","url","users","ProfileLiveServ","UserUniqueServ",function(e,t,n,r,i,o,s,a){function c(t){var n={email:t,password:"123456"};return e(function(e,i){var o=r(p);o.$createUser(n).then(function(n){o.$resetPassword({email:t}).then(function(){e(n)})})["catch"](function(e){console.error(e),i(e)})})}function u(n,r){return e(function(e,i){var o=v(n);g.$add(o).then(function(n){r?e(n.key()):c(o.profile.email.toLowerCase()).then(function(r){var i=r.uid,o=t(n);o.$loaded().then(function(){o.auth.svet.id=i,o.$save().then(function(){e(o.$id)})})})["catch"](function(e){console.error(e),i(e)})})})}function l(e){var t=e.toLowerCase();return t=t.replace(/ +?/g,"-")}function d(e,t){e.profile.email=t.google.email,e.profile.userName=l(t.google.displayName),e.profile.avatar=t.google.cachedUserProfile.picture,e.auth={google:t.google,svet:{email:e.profile.email}}}function f(e,t){e.profile.email=t.facebook.email,e.profile.userName=l(t.facebook.displayName),e.profile.avatar=t.facebook.cachedUserProfile.picture.data.url,e.auth={facebook:t.facebook,svet:{email:e.profile.email}}}function m(e,t){e.profile.email=t.email,e.profile.userName=t.userName,t.id=t.uid,t=_.omit(t,"uid","userName"),e.auth={svet:t}}function v(e){var t={};return t.profile={},"google"===e.provider&&d(t,e),"facebook"===e.provider&&f(t,e),e.provider||m(t,e),t.profile.role="reader",t}var p=new Firebase(o),g=n(p);return{changeUserRole:function(n,r){return e(function(e,i){var o=t(p.child(n.$id).child("profile"));o.$loaded(function(){o.role===r?o.role="reader":o.role=r,o.$save().then(function(t){e(t.key())})})})},getProfile:function(t){return e(function(e,n){g.$loaded().then(function(){var n=a.findDbProfile(t,g);n?s.setBinding(n.$id).then(function(){e(n.profile)}):u(t,!0).then(function(t){s.setBinding(t).then(function(){e(t)})})})["catch"](function(e){n(e)})})},cleanProfile:function(){s.unbind()},createSvetUser:function(t,n,i){var o=r(p);return e(function(e,r){o.$createUser({email:t,password:n}).then(function(n){n.userName=i,n.email=t,u(n,!0).then(function(){e(n)})})["catch"](function(e){r(e)})})}}}])}(),function(){"use strict";angular.module("auth").factory("ProfileExtentionServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{extend:function(e){return e.isManager=function(){return"manager"===this.role},e.isEditor=function(){return"editor"===this.role},e.isAuthor=function(){return"author"===this.role||"editor"===this.role},e.isOnlyAuthor=function(){return"author"===this.role},e.isCustomer=function(){return"customer"===this.role},e.isReader=function(){return"reader"===this.role},e}}}])}(),function(){"use strict";angular.module("auth").filter("Groups",function(){return function(e,t){if(e&&0!==e.length)return"all"===t?_.reject(e,{profile:{role:"manager"}}):_.filter(e,function(e){return e.profile.role===t&&"manager"!==e.profile.role})}})}(),function(){"use strict";angular.module("auth.user",["ui.router","flow"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.user",{"abstract":!0,url:"/:uid",resolve:{userRights:["$q","$stateParams","userPromise","userAuth",function(e,t,n,r){var i=t.uid;r.profile.userName||n.userName;return e(function(e,t){r&&r.profile.userName===i?e():t("You do not have enough privileges to view that page!")})}]},controller:"UserCtrl as user",templateUrl:"scripts/auth/user/views/userCtrl.html"}).state("app.user.news",{"abstract":!0,url:"/news",controller:"UserNewsCtrl",templateUrl:"scripts/auth/user/views/user-newsCtrl.html"}).state("app.user.news.articles",{url:"/articles",controller:"AuthorArticlesCtrl as authorArticles",templateUrl:"scripts/auth/user/views/author-articlesCtrl.html"}).state("app.user.news.blogs",{url:"/blogs",controller:"AuthorBlogsCtrl",templateUrl:"scripts/auth/user/views/author-blogsCtrl.html"}).state("app.user.dashboard",{url:"/dashboard",controller:"UserDashboardCtrl as userDashboard",templateUrl:"scripts/auth/user/views/userDashboardCtrl.html"}).state("app.user.author-drafts",{url:"/author-drafts",controller:"AuthorDraftsCtrl as authorDrafts",templateUrl:"scripts/auth/user/views/author-draftsCtrl.html"}).state("app.user.profile-settings",{url:"/profile-settings",controller:"ProfileSettingsCtrl as profileSettings",templateUrl:"scripts/auth/user/views/profile-settingsCtrl.html"}).state("app.user.social",{url:"/social",controller:"UserSocialCtrl as userSocial",templateUrl:"scripts/auth/user/views/userSocialCtrl.html"}).state("app.user.homepage-rank",{url:"/homepage-rank",controller:"HomepageRankCtrl",templateUrl:"scripts/article/views/homepage-rankCtrl.html"})}])}(),function(){"use strict";angular.module("auth.user").controller("UserNewsCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){"use strict";angular.module("auth.user").controller("AuthorBlogsCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").directive("svChangePassword",["userAuth","$firebaseAuth","url","toastr",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-change-password.html",scope:{},link:function(i,o,s){function a(){i.password={val:""},i.newPassword={val:""}}i.authObj=t(new Firebase(n)),i.changePassword=function(){i.authObj.$changePassword({email:e.profile.email,oldPassword:i.password.val,newPassword:i.newPassword.val}).then(function(){r.info("Password changed successfully!"),a()})["catch"](function(e){r.error("Current Password is incorrect")})}}}}])}(),function(){"use strict";angular.module("auth.user").controller("AuthorArticlesCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){"use strict";angular.module("auth.user").controller("AuthorDraftsCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").controller("UserCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").controller("UserDashboardCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").controller("UserSocialCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").controller("ProfileSettingsCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").directive("svUserSocialTabs",function(){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-social-tabs.html",scope:{},link:function(e,t,n){var r=[],i=null,o=null;e.tabs=r,e.selectedIndex=0,e.$watch("selectedIndex",function(e,t){o=i,i=r[e]})}}})}(),function(){"use strict";angular.module("auth.user").directive("svUserDropdownMenu",["avatar","alex","userAuth",function(e,t,n){return{templateUrl:"scripts/auth/user/directives/sv-user-dropdown-menu.html",link:function(r,i,o){r.user=n.profile,r.defaultAvatar=e,r.alexAvatar=t}}}])}(),function(){"use strict";angular.module("auth").directive("svUserAdTabs",["userAuth","$state",function(e,t){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-ad-tabs.html",scope:{},link:function(n,r,i){n.$watch(function(){return t.current},function(e,t){var r=_.last(e.name.split("."));n.selectedIndex="promotion"===r?0:1}),n.user=e.profile}}}])}(),function(){"use strict";angular.module("auth.user").directive("svUsersList",["toastr","avatar","UsersServ","ProfileServ",function(e,t,n,r){return{replace:!0,require:"^svManagerUsersTabs",templateUrl:"scripts/auth/user/directives/sv-users-list.html",scope:{groupFilter:"@"},link:function(i,o,s,a){i.avatar=t,i.users=n.allUsersList(),i.users.$loaded(function(){var e=_.countBy(i.users,function(e){return e.profile.role});e.all=_.filter(i.users,function(e){return"manager"!==e.profile.role}).length,a.userTypesCount(e),i.users.$watch(function(){var e=_.countBy(i.users,function(e){return e.profile.role});e.all=_.filter(i.users,function(e){return"manager"!==e.profile.role}).length,a.userTypesCount(e)})}),i.changeUserRole=function(t,n){r.changeUserRole(t,n).then(function(){e.info("role has been changed")})}}}}])}(),function(){"use strict";angular.module("auth.user").directive("svBusinessAccountRequests",["RequestServ","toastr","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-business-account-requests.html",scope:{},link:function(n,r,i){e.getAllRequests().then(function(e){n.users=e}),n.accept=function(n){e.acceptRequest(n.$id).then(function(){t.info("request has been accepted")})},n.reject=function(n){e.rejectRequest(n.$id).then(function(){t.info("request has been rejected")})}}}}])}(),function(){"use strict";angular.module("auth.user").directive("svUserPersonalInfo",["toastr","userAuth","UsersServ",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-personal-info.html",scope:{},link:function(r,i,o){r.userName={value:angular.copy(t.profile.userName),label:"userName"},r.oldUserName=t.profile.userName,r.user=t.profile,r.saveUserName=function(i,o){o&&r.personalInfoForm.$valid&&(i.value=i.value.replace(/\s+/g,"-").toLowerCase(),n.saveUserProperty(i,t.key).then(function(t){e.success("Saved")}))}}}}])}(),function(){"use strict";angular.module("auth.user").directive("svUserProfileSummary",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-profile-summary.html",scope:{},link:function(t,n,r){t.user=e.profile}}}])}(),function(){"use strict";angular.module("auth.user").directive("svUserDashboardTabs",["$translate","$timeout","$q",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-dashboard-tabs.html",scope:{},link:function(e,t,n){e.selectedIndex=0}}}])}(),function(){"use strict";angular.module("auth").directive("svAuthorArticlesTabs",["userAuth","ArticlesServ","toastr","$state",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-author-articles-tabs.html",scope:{},controller:["$scope",function(e){var r=this;r.removeOneArticle=function(e){t.remove(e).then(function(){n.info("article has been deleted")})}}],link:function(n,i,o){r.current.name;n.$watch(function(){return r.current.name},function(e,t){e&&"app.user.news.blogs"===e?n.selectedIndex=1:n.selectedIndex=0}),n.user=e.profile;var s=t.all();s.$loaded().then(function(){n.loaded=!0,n.articles=s,s.$watch(function(){n.articles=s})})}}}])}(),function(){"use strict";angular.module("auth.user").directive("svUserProfileNav",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/auth/user/directives/sv-user-profile-nav.html",scope:{},link:function(t,n,r){t.user=e.profile}}}])}(),function(){"use strict";angular.module("auth.manager",["ui.router","flow"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.manager",{url:"/manager/:uid","abstract":!0,resolve:{rights:["$q","$stateParams","userAuth","userPromise",function(e,t,n,r){var i=t.uid;return e(function(e,t){n.profile&&n.profile.role&&"manager"===n.profile.role&&n.key===i?e():t("You do not have enough priviliges to view that page!")})}]},controller:"ManagerCtrl as manager",templateUrl:"scripts/auth/manager/views/managerCtrl.html"}).state("app.manager.dashboard",{url:"/dashboard",controller:"ManagerDashboardCtrl as managerDashboard",templateUrl:"scripts/auth/manager/views/manager-dashboardCtrl.html"}).state("app.manager.users",{url:"/users",controller:"ManagerUsersCtrl as managerUsers",templateUrl:"scripts/auth/manager/views/manager-usersCtrl.html"}).state("app.manager.ad",{url:"/advertisement",controller:"ManagerAdCtrl as managerAd",templateUrl:"scripts/ad/promotion/views/manager-adCtrl.html"}).state("app.manager.ad.start",{url:"/manage-promotion/:id",controller:"NewPromotionByManagerCtrl",templateUrl:"scripts/ad/promotion/views/new-promotion-by-managerCtrl.html"})}])}(),function(){"use strict";angular.module("auth.manager").controller("ManagerCtrl",["$scope","$rootScope",function(e,t){}])}(),function(){"use strict";angular.module("auth.manager").controller("ManagerDashboardCtrl",["$scope",function(e){console.log("run here ManagerDashboardCtrl.js")}])}(),function(){"use strict";angular.module("auth.manager").controller("ManagerUsersCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.manager").directive("svManagerDashboardTabs",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-dashboard-tabs.html",scope:{},link:function(e,t,n){var r=[],i=null,o=null;e.tabs=r,e.selectedIndex=0,e.$watch("selectedIndex",function(e,t){o=i,i=r[e]})}}})}(),function(){"use strict";angular.module("auth.manager").directive("svManagerDropdown",["userAuth",function(e){return{templateUrl:"scripts/auth/manager/directives/sv-manager-dropdown.html",link:function(t,n,r){t.key=e.key,t.user=e.profile}}}])}(),function(){"use strict";angular.module("auth.manager").directive("svManagerProfileNav",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-profile-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("auth.manager").directive("svManagerProfileSummary",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-profile-summary.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("auth.manager").directive("svManagerUsersTabs",function(){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-users-tabs.html",controller:["$scope",function(e){this.userTypesCount=function(t){e.count=t}}],scope:{},link:function(e,t,n){e.selectedIndex=0}}})}(),function(){"use strict";angular.module("auth.manager").directive("svAfishaEventsTabs",["svetEventsConst",function(e){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-afisha-events-tabs.html",link:function(e,t,n){var r=[],i=null,o=null;
e.tabs=r,e.selectedIndex=0,e.$watch("selectedIndex",function(e,t){o=i,i=r[e]})}}}])}(),function(){"use strict";angular.module("auth.manager").directive("svManagerBusinessAdList",["AdServ","userAuth","toastr",function(e,t,n){return{replace:!0,templateUrl:"scripts/auth/manager/directives/sv-manager-business-ad-list.html",scope:{},link:function(r,i,o){r.ads=e.all(),r.user=t.profile,r.removeAd=function(t){e.removeAd(t).then(function(){n.warning("You campaign has been deleted")})}}}}])}(),function(){"use strict";angular.module("auth.manager").factory("UsersServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){var o=new Firebase(n);return{allUsersList:function(){var e=i(o);return e},allCustomersList:function(){return e(function(e,t){var n=i(o);n.$loaded(function(){var t=_.filter(n,function(e){return"customer"===e.profile.role});e(t)})})},saveUserProperty:function(t,i){return e(function(e,o){var s=n+i+"/profile",a=r(new Firebase(s));a.$loaded().then(function(){a[t.label]=t.value,a.$save().then(function(t){e(t)})})})}}}])}(),function(){"use strict";angular.module("auth.notifications",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("auth.notifications").factory("TestMeToServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{get:function(){},getAssync:function(){return e(function(e,t){})}}}])}(),function(){"use strict";angular.module("auth.notifications").filter("toArray",function(){return function(e){var t=[];return _.forOwnRight(e,function(e,n){e.timestamp&&(e.$id=n,t.push(e))}),t}})}(),function(){"use strict";angular.module("auth.notifications").directive("svNoticeIcon",function(){return{link:function(e,t,n){var r=t.find("#svi");e.$watch("hasNotices",function(t,n){t&&e.$apply(function(){r.addClass("icon--red2")})})}}})}(),function(){"use strict";angular.module("auth.notifications").directive("svNotificationsList",["userAuth","$mdMedia","NotificationsServ","$state",function(e,t,n,r){return{templateUrl:"scripts/auth/notifications/directives/sv-notifications-list.html",link:function(e,t,i){e.$watchCollection("user.notifications",function(t){t&&(e.unopened=_.filter(t,function(e){return e.opened===!1}).length)}),e.markAllOpened=function(){n.markAllNotificationsOpened()},e.markOpened=function(e){n.markNotificationOpened(e.$id),r.go("app.events.one-event",{eid:e.eid})}}}}])}(),function(){"use strict";angular.module("auth.notifications").directive("svDropAlign",["$mdMedia",function(e){return{link:function(t,n,r){t.$watch(function(){return e("sm")},function(e){e?console.log(" not sm"):(n.removeClass("dropdown-menu--left"),n.addClass("dropdown-menu--right"),n.css({"background-color":"500px"}))})}}}])}(),function(){"use strict";angular.module("auth.notifications").factory("NotificationsServ",["$q","url","users","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,i,o){function s(t,r,o,s){var a=[];return angular.forEach(t,function(e){var t=r[e];if(t.profile.role===s){var c=new Firebase(n+e+"/profile/notifications"),u=i(c),l=u.$add(o);a.push(l)}}),e.all(a)}new Firebase(n);return{markNotificationOpened:function(t){var i=o.key,s=n+i+"/profile/notifications/"+t;return e(function(e,t){var n=r(new Firebase(s));n.$loaded().then(function(){n.opened=!0,n.$save().then(function(){e()})})})},markAllNotificationsOpened:function(){var t=o.key,r=n+t+"/profile/notifications/";return e(function(e,t){var n=i(new Firebase(r));n.$loaded().then(function(){n.forEach(function(e){e.opened=!0,n.$save(e)})})})},addToCustomers:function(t){return e(function(e,i){var o=r(new Firebase(n));o.$loaded().then(function(){var n=_.chain(o).keysIn().filter(function(e){return!_.startsWith(e,"$")&&"forEach"!==e}).value();s(n,o,t,"customer").then(function(t){e(t)})["catch"](function(e){i(e)})})})},addToManagers:function(t){return e(function(e,i){var o=r(new Firebase(n));o.$loaded().then(function(){var n=_.chain(o).keysIn().filter(function(e){return!_.startsWith(e,"$")&&"forEach"!==e}).value();s(n,o,t,"manager").then(function(t){e(t)})["catch"](function(e){i(e)})})})}}}])}(),function(){"use strict";angular.module("ad.classified",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.classified",{"abstract":!0,url:"/classifieds",resolve:{clsLive:["ClassifiedServ",function(e){return e.bindClassifiedsLive()}]},controller:"ClassifiedCtrl as classified",templateUrl:"scripts/ad/classified/views/classifiedCtrl.html"}).state("app.classified.general",{url:"/:clSection/:clId?",controller:"OneClassifiedCtrl as oneClassified",templateUrl:"scripts/ad/classified/views/one-classifiedCtrl.html"})}])}(),function(){"use strict";angular.module("ad.classified").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{classified:"Classified","svet-classified":"Svet Classified","watch-all-svet-classified":"Watch All Svet Classified","classified-section":"Classified Section","last-classified":"Last Classified",community:"Community",job:"Job Offers",lookingForJob:"Looking for Job",sale:"For Sale",services:"Services",cars:"Cars",housing:"Housing",personal:"Personal",lessons:"Lessons","my-classified":"My Classified","new-classified":"New Classified","no-classified-yet":"You do not have any classified yet","free-classified":"You can Post for Free ","start-posting-classified":"Start Posting Classified Now","add-classified":"Add Classified","back-to-my-classified":"Back to my classified",bonuses:"Bonuses","contact-name":"Contact Name","contact-phone":"Contact Phone","contact-email":"Contact Email",state:"State",city:"City","classified-title":"Classified Title","classified-description":"Classified Description",price:"Price",post:"Post"}),e.translations("ru",{classified:"Частные Объявления","svet-classified":"Частные Объявления","watch-all-svet-classified":"Смотреть Все Частные Объявления","classified-section":"Раздел  Объявления","last-classified":"Свежее Объявление",community:"Сообщество",job:"Требуются на работу",lookingForJob:"Ищу работу",lessons:"Уроки",sale:"Продажа",services:"Услуги",cars:"Авто",housing:"Недвижимость",personal:"Знакомства","my-classified":"Мои Объявления","new-classified":"Новое объявление","no-classified-yet":"У Вас пока нет объявлений","add-classified":"Добавить Объявление","back-to-my-classified":"Вернуться к моим объявлениям","free-classified":"Вы можете разместить бесплатно","start-posting-classified":"Создать Объявление ",bonuses:"Бонусы","contact-name":"Контактное Имя","contact-phone":"Контактный Телефон","contact-email":"Контактный Email",state:"Штат",city:"Город","classified-title":"Заголовок объявления","classified-description":"Содержание объявления",price:"Цена",post:"Опубликовать"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("ad.classified").controller("ClassifiedCtrl",["$scope","classified","$rootScope","$state","$stateParams",function(e,t,n,r,i){e.allCls=t.list,e.svRoute=r.params.clSection||_.last(r.current.name.split(".")),e.svTabs=["job","lookingforjob","services","housing","lessons","personal","sale","community"],n.$on("$stateChangeStart",function(t,n,r,i,o){r.clSection?e.svRoute=r.clSection:e.svRoute=_.last(n.name.split("."))})}])}(),function(){"use strict";angular.module("ad.classified").controller("OneClassifiedCtrl",["$scope","$stateParams","ClassifiedServ","classified",function(e,t,n,r){t.clSection;e.id=t.clId,e.isList=_.isEmpty(e.id),e.id?e.cl=n.getClByKey(e.id):e.allCls=r.list}])}(),function(){"use strict";angular.module("ad.classified").directive("svHeaderClassifiedBtn",function(){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-header-classified-btn.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("ad.classified").directive("svClassifiedField",function(){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-classified-field.html",scope:!0,link:function(e,t,n){e.name=n.name}}})}(),function(){"use strict";angular.module("ad.classified").directive("svOneClassified",function(){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-one-classified.html",scope:{cl:"=",widget:"="},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("ad.classified").directive("svOneClassifiedThumb",["TimeLeftServ","ClassifiedServ","$mdDialog","toastr","$state","$timeout","$animate","userAuth","$translate","viewModalConst",function(e,t,n,r,i,o,s,a,c,u){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-one-classified-thumb.html",scope:{oneClId:"=",isNew:"=",cl:"=",removeCl:"&",banCl:"&",editCl:"&",widget:"=",isHome:"="},link:function(s,c,l){function d(e,t,n,r){e.cl=n.cl,e.widget=n.widget,e.goToSectionList=function(){var t="app.classified.general."+e.cl.section;r.go(t),e.hide()},e.hide=function(){r.go("app.classified.general",{clSection:e.cl.section,clId:""},{reload:!1}),n.cl=null,t.hide()}}var f=400;s.$watch("cl",function(t,n){t&&o(function(){s.currentCl=t;var n=e.computeInDays(t.timestamp,7);s.status=n.isActive,s.timeLeft=n.timeLeft,s.isNewCurr=s.isNew},f)},!0),s.banByManager=function(e){t.banCl(e).then(function(){r.warning("Classified is banned")})},s.user=a.profile,s.editState=!1,s.isEditable=function(){return!s.isHome&&(!(i.current.name.indexOf("classified")>-1&&i.current.name.indexOf("user")===-1)&&(!!a.profile&&(a.key===s.cl.userKey||void 0)))},s.showClassifiedModal=function(e){u.cl||(s.oneClId!==s.cl.$id&&i.go("app.classified.general",{clSection:s.cl.section,clId:s.cl.$id},{reload:!1}),u.cl=e,u.widget=s.widget,n.show({controller:d,templateUrl:"scripts/ad/classified/views/modalClassified.html"}))},!s.isHome&&s.oneClId&&s.cl.$id===s.oneClId&&s.showClassifiedModal(s.cl),d.$inject=["$scope","$mdDialog","viewModalConst","$state"]}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svUserClassifiedSection",["ClassifiedServ","toastr","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-user-classified-section.html",scope:{},link:function(r,i,o){r.user=n.profile,r.cls=e.getAllCls(),r.removeCl=function(n){e.removeCl(n).then(function(e){t.warning("Your classified removed")})},r.editCl=function(e){r.editState=!0,r.populateForm(e)}}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svAddClassifiedBtn",["ClassifiedServ","$state",function(e,t){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-add-classified-btn.html",link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svClassifiedBonus",["$rootScope","ClassifiedServ",function(e,t){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-classified-bonus.html",link:function(e,n,r){e.startCl=function(){t.isClAvailable(e.cls)?(e.notAllowed=!1,e.addState=!0):(e.notAllowed=!0,e.addState=!1)}}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svClassifiedTabs",["$state",function(e){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-classified-tabs.html",link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svClassifiedWidget",["ClassifiedServ","classified","$interval","classifiedInterval","TimeLeftServ","$mdMedia",function(e,t,n,r,i,o){function s(e,t,n){return"increase"===n&&(e++,e=e>t?0:e),"decrease"===n&&(e--,e=e<0?t:e),e}function a(e){var t=e.cls[e.currentClassifiedIndex];t&&(e.currentClTime=t.timestamp,e.isCurrentNew=i.isNew(e.currentClTime,24))}function c(e){e.cls=t.list,e.currentClassifiedIndex=e.cls.length-1,a(e),n.cancel(u),u=n(function(){e.currentClassifiedIndex=s(e.currentClassifiedIndex,e.cls.length,"decrease"),a(e)},r)}var u;return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-classified-widget.html",scope:{isHome:"="},link:function(t,n,r){e.bindClassifiedsLive().then(function(){c(t)}),t.$on("cl-added",function(){c(t)}),t.nextCl=function(){t.currentClassifiedIndex=s(t.currentClassifiedIndex,t.cls.length-1,"increase"),a(t)},t.prevCl=function(){t.currentClassifiedIndex=s(t.currentClassifiedIndex,t.cls.length-1,"decrease"),a(t)}}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svAddClassifiedForm",["ClassifiedServ","toastr","$mdDialog",function(e,t,n){return{replace:!0,templateUrl:"scripts/ad/classified/directives/sv-add-classified-form.html",controller:["$scope",function(e){function t(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.termsConditionsClassifiedModal=function(){n.show({controller:t,templateUrl:"scripts/common/views/terms-conditions-classified.html"})},t.$inject=["$scope","$mdDialog"]}],link:function(n,r,i){n.sections=e.getSections(),n.isInvalid=function(e){return!!n.classifiedForm[e].$invalid&&(n.classifiedForm.$submitted||n.classifiedForm[e].$touched)},n.cancelAddition=function(){n.editState&&(n.cl=n.clCopy),n.addState=!1,n.editState=!1,n.classifiedForm.$pristine=!0,n.resetForm(),n.populateForm()},n.postClassified=function(r){return n.classifiedForm.$invalid?void t.warning("Please fill required fields"):(r.timestamp=moment().format("x"),void(r.$id?e.editCl(r).then(function(e){t.success("Your classified ad has been updated.Thank you"),n.resetForm(),n.populateForm(),n.addState=!1,n.editState=!1}):e.addCl(r).then(function(e){t.success("Your classified ad has been placed.Thank you"),n.resetForm(),n.populateForm(),n.addState=!1,n.editState=!1})))},n.resetForm=function(){n.clCopy={name:"",tel:"",email:"",city:"",state:"",title:"",price:"",acceptClassifiedPolicy:"",description:""}},n.populateForm=function(e){e&&(n.clCopy=angular.copy(e)),e||(n.clCopy={name:"",tel:"",email:"",city:"",state:"",title:"",price:"",acceptClassifiedPolicy:"",description:""})},n.populateForm()}}}])}(),function(){"use strict";angular.module("ad.classified").directive("svAnimateOnChange",["$timeout",function(e){return{priority:-1,link:function(t,n,r){t.$watch(r.svAnimateOnChange,function(t,r){t!=r?(n.addClass("changed"),e(function(){n.removeClass("changed")},1e3)):(n.css({top:"-200px",opacity:0}),n.animate({top:"0px",opacity:1},400,function(){n.css({top:"",opacity:""})}))})}}}])}(),function(){"use strict";angular.module("ad.classified").factory("TimeLeftServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{computeInDays:function(e,t){var n=moment(e,"x").add(t,"days"),r=n.isAfter();return{isActive:r,timeLeft:n.fromNow()}},isNew:function(e,t){var n=moment(e,"x").add(t,"hours"),r=n.isAfter();return r}}}])}(),function(){"use strict";angular.module("ad.classified").filter("userCls",["userAuth",function(e){return function(t){return _.filter(t,{userKey:e.key})}}])}(),function(){"use strict";angular.module("ad.classified").filter("clType",function(){return function(e,t){return"all"===t?e:_.filter(e,{section:t})}})}(),function(){"use strict";angular.module("ad.classified").filter("isNewCl",function(){return function(e){if(e){var t=parseInt(moment().format("x")),n=parseInt(e),r=(t-n)/6600;return r<24?"New!":void 0}}})}(),function(){"use strict";angular.module("ad.classified").filter("isNew",function(){return function(e){moment(e)}})}(),function(){"use strict";angular.module("ad.classified").factory("ClassifiedServ",["$q","url","$rootScope","users","$firebaseObject","$firebaseArray","userAuth","classified",function(e,t,n,r,i,s,a,c){function u(e){e=_.filter(e,function(e){return!e.banned});var t=_.shuffle(e,"timestamp");return t}var l=10,d=t+"cls/all/";return{getClByKey:function(e){var t=i(new Firebase(d+e));return t},getAllCls:function(){var e=s(new Firebase(d));return e},bindClassifiedsLive:function(){return e(function(e,t){var r=s(new Firebase(d));r.$loaded(function(){c.list=u(r),r.$watch(function(){var e=u(r);c.list=e,n.$broadcast("cl-added")}),e()})})},getUserClassifiesArr:function(e){var t=r+e+"/cls/",n=s(new Firebase(t));return n},addCl:function(t){return e(function(e,n){t.userKey=a.key;var r=s(new Firebase(d));r.$add(t).then(function(t){e(t.key())})})},editCl:function(t){t.$id;return e(function(e,n){var r=i(new Firebase(d));r.$loaded().then(function(){r[t.$id]=t,r.$save().then(function(){e()})})})},banCl:function(t){var n=t.$id;return e(function(e,t){var r=i(new Firebase(d+n));r.$loaded().then(function(){r.banned=!0,r.$save().then(function(){e()})})})},removeCl:function(t){a.profile;return e(function(e,n){var r=i(new Firebase(d+t.$id));r.$loaded().then(function(){r.$remove().then(function(t){e(t.key())})})})},getSections:function(){var e=t+"/cls/sections/",n=s(new Firebase(e));return n},isClAvailable:function(e){if(!e)return o;e.length;return!0},howManyAllowed:function(e){if(!e)return 0;var t=e.length,n=l-t;return n<0?0:n}}}])}(),function(){"use strict";angular.module("ad.promotion",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("ad.promotion").directive("svSliderBtn",function(){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-slider-btn.html",link:function(e,t,n){}}})}(),function(){"use strict";angular.module("ad.promotion").directive("svShakouAd",["$window","$timeout",function(e,t){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-shakou-ad.html",scope:{},link:function(t,n,r){t.orel=Math.random()>=.5;var i=n.parent()[0].offsetWidth,o=i/738>1?1:i/738,s=angular.element(e);t.w=i>=738?738:i,t.h=(200*o).toFixed(2),t.svStyle={width:t.w+"px",height:t.h+"px"},t.getWindowDimensions=function(){return{h:s.height(),w:s.width()}},t.$watch(t.getWindowDimensions,function(e,r){i=n.parent()[0].offsetWidth,o=i/738>1?1:i/738,t.w=i>=738?738:i,t.h=Math.floor(200*o),t.svStyle={width:t.w+"px",height:t.h+"px"}},!0),s.bind("resize",function(){t.$apply()})}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svAdBannerUpload",["ImageValidationServ","toastr",function(e,t){return{templateUrl:"scripts/ad/promotion/directives/sv-ad-banner-upload.html",link:function(n,r,i){n.$watchCollection("$flow.files",function(o){if(o&&o.length){var s=_.last(o);n.$flow.files[0]=s;var a=s,c=new FileReader;c.readAsDataURL(a.file),c.onload=function(o){var s=new Image;s.onload=function(){var c=a.size,u=s.width,l=s.height,d={size:c,width:u,height:l},f=e.validate(d,i);f.length?(f.forEach(function(e){t.error(e)}),n.$flow.files=[],r.trigger("blur")):n.ad.img=o.target.result};var c=o.target.result;s.src=c}}})}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svS3Upload",["Upload",function(e){return{templateUrl:"scripts/ad/promotion/directives/sv-s3-upload.html",link:function(t,n,r){t.$watch("files",function(){t.upload(t.files)}),t.upload=function(t){if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];e.upload({url:"https://svet.com.s3.amazonaws.com/",method:"POST",fields:{key:r.name,AWSAccessKeyId:"AKIAIBCXUOSMU2F4U7HA",acl:"private",policy:"eyJleHBpcmF0aW9uIjogIjIwMTktMDEtMDFUMDA6MDA6MDBaIiwKICAiY29uZGl0aW9ucyI6IFsgCiAgICB7ImJ1Y2tldCI6ICJzdmV0LmNvbSJ9LCAKICAgIFsic3RhcnRzLXdpdGgiLCAiJGtleSIsICJ1cGxvYWRzLyJdLAogICAgeyJhY2wiOiAicHVibGljIn0sCiAgICB7InN1Y2Nlc3NfYWN0aW9uX3JlZGlyZWN0IjogImh0dHA6Ly9sb2NhbGhvc3QvIn0sCiAgICBbInN0YXJ0cy13aXRoIiwgIiRDb250ZW50LVR5cGUiLCAiIl0sCiAgICBbImNvbnRlbnQtbGVuZ3RoLXJhbmdlIiwgMCwgMTA0ODU3Nl0KICBdCn0=",signature:"3/fnaO8Edb7/JPZvZFq1lwtLz/Y=","Content-Type":""!=r.type?r.type:"application/octet-stream",filename:r.name},file:r}).progress(function(e){var t=parseInt(100*e.loaded/e.total);console.log("progress: "+t+"% "+e.config.file.name)}).success(function(e,t,n,r){console.log("file "+r.file.name+"uploaded. Response: "+e)})}}}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svCustomerAvatar",["avatar",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-customer-avatar.html",scope:{customer:"="},link:function(t,n,r){t.defaultAvatar=e}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svCustomersDropdown",["avatar",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-customers-dropdown.html",scope:{customers:"=",selectedCustomer:"="},link:function(t,n,r){t.defaultAvatar=e,t.setSelectedCustomer=function(e){t.selectedCustomer=e,console.log("run here sv-customers-dropdown.js")}}}}])}(),function(){"use strict";angular.module("ad.promotion").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{"business-promotion":"Business Promotion","back-to-my-campaigns":"Back to my Campaigns","my-business-promotion":"My Business Promotion","add-business-ad":"Start New Campaign","business-ad":"Business Advertisement",ad:"Advertisement","my-ad":"My Advertisement","my-ad-campaign":"My Advertisement Campaign","campaign-name":"Campaign Name","ad-place":"Advertisement Place",www:"Company Web Site","advertise-with-us":"Advertise with us!",anchor:"Outbound Anchor Text"}),e.translations("ru",{"business-promotion":"Продвижение Вашего Бизнеса","back-to-my-campaigns":"Вернуться к моим кампаниям","my-business-promotion":"Продвижение Моего Бизнеса","add-business-ad":"Начать Новую Кампанию","business-ad":"Бизнес",ad:"Рекламная служба","my-ad":"Объявления","my-ad-campaign":"Моя Рекламная Кампания","campaign-name":"Название Кампании","ad-place":"Место показа рекламы","advertise-with-us":"Продвигайте бизнес с нами!",www:"Сайт компании",anchor:"Текст Ссылки"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("ad.promotion").controller("NewPromotionByManagerCtrl",["$scope","$stateParams",function(e,t){e.id=t.id}])}(),function(){"use strict";angular.module("auth").controller("CustomerAdCtrl",["$scope","userAuth",function(e,t){e.user=t.profile}])}(),function(){"use strict";angular.module("auth").controller("ManagerAdCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("ad.promotion").controller("StartCampaignCtrl",["$scope","$stateParams",function(e,t){e.id=t.id}])}(),function(){"use strict";angular.module("ad.promotion").directive("svOneCampaignThumb",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-one-campaign-thumb.html",scope:{ad:"=",removeAd:"&"},link:function(t,n,r){t.user=e.profile}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svBanner",function(){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-banner.html",scope:{imgUrl:"@",linkUrl:"@",imgAlt:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("ad.promotion").directive("svCustomPaperHeadAd",function(){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-custom-paper-head-ad.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("ad.promotion").directive("svHomeBanner",["AdServ","$timeout","$mdMedia","$interval",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-home-banner.html",scope:{place:"@"},link:function(i,o,s){r(function(){i.showNextAd()},2e4),i.$watch(function(){return n("sm")},function(e){e&&(i.arrowShift=35)}),i.$watch(function(){return n("gt-sm")},function(e){e&&(i.arrowShift=47)}),i.$watch(function(){return n("gt-md")},function(e){e&&(i.arrowShift=57)}),i.$watch(function(){return n("gt-lg")},function(e){e&&(i.arrowShift=67)}),i.adIndex=0,e.allArrShuffled().then(function(t){i.ads=t,i.ad=i.ads[i.adIndex],i.currentAd=i.ads[i.adIndex].banner,e.increaseShow(i.ads[i.adIndex].$id)});var a;i.showPrevAd=function(){a=i.adIndex,a--,a=a<0?i.ads.length-1:a,i.adIndex=a,t(function(){i.ad=i.ads[i.adIndex],i.currentAd=i.ads[i.adIndex].banner},700),e.increaseShow(i.ads[i.adIndex].$id)},i.showNextAd=function(){a=i.adIndex,a++,a=a===i.ads.length?0:a,i.adIndex=a,t(function(){i.ad=i.ads[i.adIndex],i.currentAd=i.ads[i.adIndex].banner},700),e.increaseShow(i.ads[i.adIndex].$id)}}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svStartCampaignForm",["AdServ","$state","toastr","userAuth","UsersServ",function(e,t,n,r,i){return{templateUrl:"scripts/ad/promotion/directives/sv-start-campaign-form.html",scope:{id:"="},link:function(o,s,a){o.user=r.profile,o.user.isManager()&&i.allCustomersList().then(function(e){o.customers=e}),o.id?o.ad=e.getObj(o.id):o.ad={name:"Campaign Name "+_.random(1,99),banner:""},o.addBusinessAd=function(r,i,s){if(s){if(!i)return void(o.id?e.updateAd(o.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}):e.saveAd(o.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}));var a=new FileReader;a.readAsDataURL(i.file),a.onload=function(r){o.ad.banner=r.target.result,o.id?e.updateAd(o.ad).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")}):e.saveAd(o.ad,o.customers).then(function(e){t.go("^"),n.info("Your Ad Campaign has been saved")})}}}}}}])}(),function(){"use strict";angular.module("ad.promotion").directive("svBusinessAd",["AdServ","toastr","userAuth",function(e,t,n){return{replace:!0,templateUrl:"scripts/ad/promotion/directives/sv-business-ad.html",scope:{},link:function(r,i,o){r.ads=e.all(),r.user=n.profile,r.removeAd=function(n){e.removeAd(n).then(function(){t.success("You campaign has been deleted")})}}}}])}(),function(){"use strict";angular.module("ad.promotion").factory("AdServ",["$q","url","ads","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,i,o){function s(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.profile.userName===t)return r.$id}}return{saveAd:function(t,r){return e(function(e,a){if(t.customerUserName)t.customerKey=s(r,t.customerUserName);else{o.profile;t.customerKey=o.key,t.customerUserName=o.profile.userName}t.timestamp=moment().format("x"),t.shows={unique:0,total:0};var c=i(new Firebase(n));c.$add(t).then(function(t){e(t.key())})})},removeAd:function(t){return e(function(e,i){var o=n+t.$id,s=r(new Firebase(o));s.$remove().then(function(t){e(t.key())})})},updateAd:function(t){return e(function(e,i){var o=n+t.$id,s=r(new Firebase(o));s.$loaded().then(function(){s=_.extend(s,t),s.$save().then(function(t){e(t.key())})})})},increaseShow:function(t){return e(function(e,i){var o=n+t,s=r(new Firebase(o));s.$loaded().then(function(){s.shows.total+=1,s.shows.unique+=1,s.$save().then(function(t){e(t.key())})})})},allArrShuffled:function(){var t=n;return e(function(e,n){var r=i(new Firebase(t));r.$loaded().then(function(){var t=_.shuffle(r);e(t)})})},all:function(){var e=n,t=i(new Firebase(e));return t},getObj:function(e){var t=n+e,i=r(new Firebase(t));return i}}}])}(),function(){"use strict";angular.module("ad.promotion").filter("userList",["userAuth",function(e){return function(t){if(e&&t&&0!==t.length)return e.profile&&e.profile.isManager()?t:_.filter(t,function(t){return t.customerKey==e.key})}}])}(),function(){"use strict";angular.module("article",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.article",{url:"/articles/:id",controller:"ArticleCtrl as article",templateUrl:"scripts/article/views/articleCtrl.html"}).state("app.user.create-article",{url:"/manage-article/:artType/:artId",controller:"CreateArticleCtrl as createArticle",onEnter:["$rootScope",function(e){e.$broadcast("image-search-show")}],onExit:["$rootScope",function(e){e.$broadcast("image-search-hide")}],templateUrl:"scripts/article/views/create-articleCtrl.html"}).state("app.svet-recommends",{url:"/svet-recommends",controller:"SvetRecommendsCtrl as svetRecommends",templateUrl:"scripts/article/views/svet-recommendsCtrl.html"})}])}(),function(){"use strict";angular.module("article").factory("AwsImagesSwitcherServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{get:function(){},getAssync:function(){return e(function(e,t){})}}}])}(),function(){"use strict";angular.module("article").directive("svOneComment",["userAuth","CommentsServ",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-one-comment.html",scope:{articleKey:"@",comment:"=",removeComment:"&"},link:function(n,r,i){n.editState=!1,n.saveCommentChanges=function(){t.updateComment(n.articleKey,n.comment).then(function(e){n.editState=!1})},n.isEditable=function(){return!!e.profile&&(!!e.profile.isManager()||(!!e.profile.isEditor()||(n.comment.user===e.key||void 0)))}}}}])}(),function(){"use strict";angular.module("article").factory("CommentsServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{saveComment:function(n,r){var o=t+"articles/"+n+"/comments";return e(function(e,t){var n=i(new Firebase(o));n.$add(r).then(function(t){console.log(t),e(t)})})},updateComment:function(n,i){var o=t+"articles/"+n+"/comments/"+i.$id;return e(function(e,t){var n=r(new Firebase(o));n.$loaded().then(function(){n.body=i.body,n.$save().then(function(t){e(t.key())})})})},removeComment:function(n,i){var o=t+"articles/"+n+"/comments/"+i;return e(function(e,t){var n=r(new Firebase(o));n.$loaded().then(function(){n.$remove().then(function(t){e(t.key())})})})}}}])}(),function(){"use strict";angular.module("article").controller("HomepageRankCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("auth.user").controller("CreateArticleCtrl",["$scope","$stateParams",function(e,t){e.artId=t.artId,e.artType=t.artType}])}(),function(){"use strict";angular.module("article").controller("SvetRecommendsCtrl",["$scope","ArticlesServ",function(e,t){}])}(),function(){"use strict";angular.module("article").controller("ArticleCtrl",["$scope","ArticlesServ","$stateParams","userAuth","SvHtmlValidatorServ","$timeout",function(e,t,n,r,i,o){e.user=r.profile,e.userKey=r.key;var s=n.id;t.get(s).$loaded().then(function(t){e.article=i.cleanArticle(t)})}])}(),function(){"use strict";angular.module("article").directive("svArticleMakeTopBtn",function(){return{replace:!0,require:"?^svEditorArticlesTabs",templateUrl:"scripts/article/directives/sv-article-make-top-btn.html",scope:{article:"=",index:"="},link:function(e,t,n,r){e.moveToTop=function(){r.moveToTop(e.article)}}}})}(),function(){"use strict";angular.module("article").directive("svTagSelector",function(){return{link:function(e,t,n){var r=n.svTagSelector.split(" ");r.slice(1);e.$watchCollection(function(){return e[collection]},function(t,n){t&&(e.filteredList=_.take(t,3))})}}})}(),function(){"use strict";angular.module("article").directive("svHtmlCleaner",["str",function(e){return{link:function(e,t,n){e.$watch("article.body",function(e,t){if(e!==t){var n='style="color: rgb(1, 1, 1);float: none;background-color: rgb(255, 255, 255);">';n.replace(/style=".+/g)}})}}}])}(),function(){"use strict";angular.module("article").directive("svReadFile",["$parse",function(e){return{restrict:"A",scope:!1,link:function(t,n,r){var i=e(r.svReadFile);n.on("change",function(e){var n=new FileReader;n.onload=function(e){t.$apply(function(){i(t,{$fileContent:e.target.result})})},n.readAsText((e.srcElement||e.target).files[0],"cp866")})}}}])}(),function(){"use strict";angular.module("article").directive("svReadTxt",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-read-txt.html",scope:{body:"="},link:function(e,t,n){e.showContent=function(t){var n;t.indexOf("\r\n\r\n")>-1&&(n=t.split("\r\n\r\n")),t.indexOf("\r\n \r\n")>-1&&(n=t.split("\r\n \r\n"));var r,i,o=$("<div></div>");_.forEach(n,function(e,t){r=e.replace(/\r\n/g," "),i="<p><br/></p><p>"+r+"</p>",o.append(i)}),e.body=o.html()}}}})}(),function(){"use strict";angular.module("article").directive("svAuthorHumanize",function(){return{require:"?^ngModel",link:function(e,t,n,r){r.$formatters.push(function(e){if(e){var t=_.map(e.split("-"),function(e){return _.capitalize(e)}).join(" ");return t}})}}})}(),function(){"use strict";angular.module("article").directive("svUrlDecode",function(){return{require:"?^ngModel",link:function(e,t,n,r){r.$formatters.push(function(e){if(e)return e.replace(/&#34;/g,'"')})}}})}(),function(){"use strict";angular.module("article").directive("svEditorArticlesTabs",["userAuth","ArticlesServ","toastr",function(e,t,n){function r(e){var t=_.filter(e,function(e){return e.isPublic&&!e.isBlog}),n=_.sortBy(t,"newsOrder");
return n}return{replace:!0,templateUrl:"scripts/article/directives/sv-editor-articles-tabs.html",scope:{},controller:["$scope",function(e){this.moveToTop=function(t){t.newsOrder=1;var n=[];n.push(t);for(var i=0;i<e.articles.length;i++){var o=e.articles[i];o.$id!=t.$id&&(o.newsOrder++,n.push(o))}e.articles=r(n),e.isRankChanged=!0}}],link:function(i,o,s){i.user=e.profile;var a=t.all();a.$loaded().then(function(){i.articles=r(a),a.$watch(function(){i.articles=r(a)})}),i.isRankChanged=!1,i.sortableOptions={update:function(e,t){i.isRankChanged=!0},axis:"y"},i.saveArticlesRank=function(){t.changeRank(i.articles).then(function(){i.isRankChanged=!1,n.info("Home Ranking has been changed")})}}}}])}(),function(){"use strict";angular.module("article").directive("svSectionArticlesList",["ArticlesServ","$rootScope","svetNews","$stateParams","$sce",function(e,t,n,r,i){return{replace:!0,templateUrl:"scripts/article/directives/sv-section-articles-list.html",scope:{},link:function(o,s,a){function c(){n["public"]?o.newsList=n["public"]:e.setHomeNewsLive().then(function(){o.newsList=n["public"]})}o.sectionName=r.sectionName,c(),t.$on("homeNewsChanged",function(){c()}),o.safeParsing=function(e){return i.trustAsHtml(e)}}}}])}(),function(){"use strict";angular.module("article").directive("svArticleThumbTitle",["ArticlesServ","svetNews","$stateParams","$rootScope",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/article/directives/sv-article-thumb-title.html",scope:{tags:"@",tc:"@",titleTc:"@",bgc:"@",sectionIcon:"@",iconType:"@",sectionTitle:"@"},link:function(e,i,o){e.tags=e.tags||" ",e.filterTags=e.tags.split(" "),e.tc=e.tc||"tc-grey-700",e.bgc=e.bgc||"bgc-grey-100",e.sectionIcon=e.sectionIcon||"newspaper",e.sectionName=n.sectionName,e.newsList=t["public"],r.$on("homeNewsChanged",function(){e.newsList=t["public"]})}}}])}(),function(){"use strict";angular.module("article").directive("svDeleteArticleBtn",["toastr",function(e){return{replace:!0,require:"^?svAuthorArticlesTabs",templateUrl:"scripts/article/directives/sv-delete-article-btn.html",scope:{articleKey:"@"},link:function(e,t,n,r){e.removeArticle=function(){r.removeOneArticle(e.articleKey)}}}}])}(),function(){"use strict";angular.module("article").directive("svImageInclude",["$rootScope",function(e){return{templateUrl:"scripts/article/directives/sv-image-include.html",link:function(t,n,r){t.includeImgToArticle=function(){e.$broadcast("include-image",{url:t.url})}}}}])}(),function(){"use strict";angular.module("article").directive("svHomePageNews",["$sce",function(e){return{templateUrl:"scripts/article/directives/sv-home-page-news.html",scope:{oneNews:"="},link:function(t,n,r){t.params={sectionName:t.oneNews.section},t.safeParsing=function(t){return e.trustAsHtml(t)}}}}])}(),function(){"use strict";angular.module("article").directive("svMainNewsStatus",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-main-news-status.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("article").directive("svOneArticleMenu",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/article/directives/sv-one-article-menu.html",scope:{news:"="},link:function(t,n,r){t.user=e,t.user.key=e.key}}}])}(),function(){"use strict";angular.module("article").directive("svEditorArticleHomeThumb",["userAuth","BlogServ","lastEditorPost","$rootScope",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/article/directives/sv-editor-article-home-thumb.html",scope:{},link:function(i,o,s){i.user=e.profile,r.$on("homeNewsChanged",function(){t.setLastBlogLive().then(function(){i.post=n.post})}),t.setLastBlogLive().then(function(){i.post=n.post})}}}])}(),function(){"use strict";angular.module("article").directive("svEditArticleBtn",["userAuth",function(e){return{replace:!0,templateUrl:"scripts/article/directives/sv-edit-article-btn.html",scope:{article:"="},link:function(t,n,r){t.user=e.profile}}}])}(),function(){"use strict";angular.module("article").directive("svAuthorArticleLink",["userAuth","$state",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-author-article-link.html",scope:{article:"=",index:"=",isRank:"="},link:function(n,r,i){n.editArticle=function(n){t.go("app.user.create-article",{uid:e.profile.userName,artId:article.fbkey})}}}}])}(),function(){"use strict";angular.module("article").directive("svOneArticleLink",["$stateParams","defimg",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-one-article-link.html",scope:{},link:function(n,r,i){n.sectionName=e.sectionName,n.defimg=t}}}])}(),function(){"use strict";angular.module("article").directive("svArticleStatus",["ArticlesServ","$rootScope",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-article-status.html",scope:{article:"=",key:"=",property:"@",chBox:"=",lbl:"@"},link:function(n,r,i){n.changeArticleStatus=function(n){e.computeNewsOrder(n).then(function(){t.$broadcast("homeNewsChanged")})}}}}])}(),function(){"use strict";angular.module("article").directive("svArticlePublicStatistics",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-article-public-statistics.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("article").directive("svImageSearch",["ImageSearchServ","$rootScope",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-image-search.html",scope:{insertImage:"&"},link:function(n,r,i){var o="";t.summary?o=t.summary.replace(/&#34;/g,'"'):t.title&&(o=t.title.replace(/&#34;/g,'"')),n.q={data:o},n.runGoogleSearch=function(t){if(t){if(t.indexOf("http")>-1)return n.images=[],void n.images.push({url:t});t.split(" ");e.fetch(t).then(function(e){var t=_.pluck(e,"data"),r=_.map(t,function(e){return e.responseData.results}),i=[];r.forEach(function(e){i=_.union(i,e)});var o=_.map(i,function(e){return e.url}),s=_.groupBy(o,function(e){return e}),a=_.sortBy(s,function(e){return-e.length}),c=_.take(a,10);n.images=_.map(c,function(e){return{url:e[0]}})})}}}}}])}(),function(){"use strict";angular.module("article").config(["$provide",function(e){e.decorator("taOptions",["taRegisterTool","$delegate",function(e,t){return t.toolbar=[["h1","h2","h3","h4","h5","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","wordcount","charcount"]],t}])}]).value("svTextAngular",{selected:!1}).directive("svSvetPad",["url","svTextAngular",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-svet-pad.html",scope:{body:"="},link:function(e,n,r){var i=n.find(".ta-scroll-window > .ta-bind >p > img");i.css({width:"280px","max-width":"280px"});var o=n.find("#svetPad")[0].classList;e.$watchCollection(function(){return o},function(e,n){e&&e!==n&&(t.selected=_.contains(e,"focussed"))});var s=n.find("div");s.css({"margin-bottom":"4px"});var a=n.find("button, #toolbarWC, #toolbarCC");a.css({"font-size":"12px",display:"inline-block",padding:"6px 12px"});var c=n.find("button");c.css({"float":"left",color:"#757575"}),e.myContent=""}}}])}(),function(){"use strict";angular.module("article").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{"svet-recommends":"Endorsed by Svet",featured:"featured","your-comment":"Your Comment","this-week":"This Week","this-week-news":"This Week News","image-source-website":"Open Image Source Website",recommended:"Recommended",society:"Society",digest:"Digest","useful-tips":"Useful Tips",history:"History","life-styles":"Lifestyles","only-on-svet":"Only on Svet",personality:"Personality","gargantua-recipes":"Gargantua Recipes",opinion:"Opinion",popular:"Popular","new-article":"New Article","new-blog-post":"New Blog Post","news-articles":"News Articles","add-article":"Add Article","add-news-article":"Add News Article","add-blog-post":"Add Blog Post","save-blog":"Save Post ","svet-blog":"Svet Blog",blog:"Blog","add-blog":"Add Blog Post","save-to-drafts":"Save to Drafts","save-to-public":"Save to Public","save-article":"Save Article","post-article":"Post Article","back-to-my-articles":"Back to My Articles","back-to-my-blogs":"Back to My Blogs","article-author":"Article Author","article-title":"Article Title","article-topic":"Custom Article Topic","article-summary":"Article Summary","summary-notice":"Please add article summary before executing image search","article-section":"Article Section",date:"Date","news-section":"News Section","article-content":"Article Content","choose-section":"Choose Section","choose-file":"Choose txt file","upload-img":"Upload Image from Your PC","photo-source":"Photo Source",tags:"Tags",views:"Views",shares:"Shares","private":"Private","articles-ranking":"Home Rank","public":"Public","image-source":"Image source","image-format":"You can upload images in JPG, JPEG, PNG format.","image-max-size":"Maximum image size: 3MB","image-min-dimensions":"Minimum image dimensions: 180x150px","image-width":"Minimum image width is 320px","image-height":"Minimum image height is 240px","image-terms-conditions":"I accept uploading and using photo and images terms and conditions"}),e.translations("ru",{"svet-recommends":"Свет Рекомендует",recommended:"Рекомендуемое",featured:"Похожее","your-comment":"Ваш Комментарий","this-week":"На етой неделе","this-week-news":"Новости недели","image-source-website":"Открыть Ресурс Изображения","only-on-svet":"Эксклюзив",history:"История","life-styles":"Стиль Жизни",personality:"Персона",digest:"Кратко",society:"Общество","useful-tips":"Полезные Советы","gargantua-recipes":"Уголок Гаргантюа",opinion:"Мнение",popular:"Популярное","new-article":"Новая Статья","new-blog-post":"Новый блог пост","news-articles":"Новости",blog:"Блог","svet-blog":"Svet Блог","add-article":" Добавить статью","add-news-article":" Добавить новость","add-blog-post":"Добавить блог пост ","add-blog":" Добавить блог пост ","save-blog":" Сохранить пост ","summary-notice":"Добавте пожалуйста описание статьи перед поиском картинки для статьи","save-to-drafts":"Сохранить в черновики","save-to-public":"Сохранить и опубликовать","save-article":"Сохранить статью","post-article":"Опубликовать статью","back-to-my-articles":"Вернуться к моим статьям","back-to-my-blogs":"Вернуться к моим блогам","article-author":"Автор статьи","article-title":"Заголовок статьи","article-topic":"Вольная Тема Статьи","article-summary":"Содержание одним предложением","article-section":"Раздел Новостей",date:"Дата","articles-ranking":"Ранг Новостей","article-content":"Содержание статьи","choose-section":"Выберите Тему","choose-file":"Выберите ТХТ файл","news-section":"Раздел Новостей","upload-img":"Загрузить фотографию","photo-source":"Ресурс фотографии",tags:"Теги",shares:"Поделились",views:"Просмотры",likes:"Понравилось","private":"Приватная","public":"Публичная","image-source":"Источик фотографии","image-format":"Допустимые форматы для фото: JPG, JPEG, PNG","image-max-size":"Максимальный размер фото: 3 Мб","image-min-dimensions":"Изображение должно быть не менее 180x150 пикселей","image-width":"Мимимальная ширина фото 320px","image-height":"Мимимальная высота фото 240px","image-terms-conditions":"Я принимаю Соглашение о передаче фото- и видеоматериалов"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("auth").directive("svCreateArticleBtn",function(){return{replace:!0,templateUrl:"scripts/article/directives/sv-create-article-btn.html",scope:{isBlog:"="},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("article").directive("svAddComment",["userAuth","CommentsServ",function(e,t){return{replace:!0,templateUrl:"scripts/article/directives/sv-add-comment.html",scope:{articleKey:"="},link:function(n,r,i){n.user=e.profile,n.user&&(n.comment={body:"",user:e.key,timestamp:moment().format("x"),avatar:n.user.avatar||""}),n.submitComment=function(){t.saveComment(n.articleKey,n.comment).then(function(e){n.comment.body=""})}}}}])}(),function(){"use strict";angular.module("article").directive("svImageUpload",["ImageValidationServ","$rootScope","taSelection","toastr","svTextAngular","$timeout",function(e,t,n,r,i,o){return{templateUrl:"scripts/article/directives/sv-image-upload.html",link:function(s,a,c){function u(e){var r=t.lastSelection,i="<img src="+e+' contenteditable="true" allowfullscreen="true" frameborder="0" ng-style="padding:5px" />';n.insertHtml(i,void 0,r),s.$flow.files=[],a.trigger("blur")}a.find("#svetPad");s.$watch(function(){return i.selected},function(e,t){e===!1?o(function(){s.svTextAngularelected=e},100):s.svTextAngularelected=e}),s.$parent.ad||s.$watchCollection("$flow.files",function(t){if(t&&t.length){var n=_.last(t);s.$flow.files[0]=n;var i=n,o=new FileReader;o.readAsDataURL(i.file),o.onload=function(t){if(s.article){var n=t.target.result,o=new Image;o.src=n,o.onload=function(){var n=i.size,l=o.width,d=o.height,f={size:n,width:l,height:d},m=e.validate(f,c);m.length?(m.forEach(function(e){r.error(e)}),s.$flow.files=[],a.trigger("blur")):u(t.target.result)}}s.event&&(s.event.img=t.target.result)}}})}}}])}(),function(){"use strict";angular.module("article").directive("svNewArticleForm",["AwsImagesSwitcherServ","$sce","str","$rootScope","SvHtmlValidatorServ","$state","toastr","SectionsServ","NewsGeneratorServ","ArticlesServ","SvobodaSaveToDbServ","userAuth","FormattedDateServ","TagsServ",function(e,t,n,r,i,o,s,a,c,u,l,d,f,m){return{replace:!0,templateUrl:"scripts/article/directives/sv-new-article-form.html",link:function(e,c,f){e.safeParsing=function(e){return t.trustAsHtml(e)},e.$watch("articleForm",function(t,n){t&&(e.isFormChanged=t.$dirty)}),e.$watchGroup(["article.title","article.summary"],function(e,t){r.title=e[0],r.summary=e[1]}),e.sections=a.all(),e.user=d.profile,e.saveArticle=function(t,r){if(r.$valid){var a=i.cleanArticle(e.article);u.add(a,t).then(function(t){o.go(o.current.name,{artId:t.$id}),e.article.$id=t.$id,s.success("Your changes are successfully saved")},function(e){console.log(e)})}else{console.log(n);for(var c="Please fill required fields:\n",l=0;l<r.$error.required.length;l++){var d=r.$error.required[l];c+=n(d.$name,"titleize")+"\n"}s.error(c)}},e.cancelArticle=function(e){o.go("app.user.news.articles")},e.artId?e.article=u.get(e.artId):e.article={isBlog:"blog"===e.artType,author:d.profile.isEditor()?"Александр Этман":d.profile.userName},e.generateFromRandomNews=function(){l.getRandom().then(function(t){e.article=_.omit(t,"$id","img"),e.article.author=d.profile.isEditor()?"Alex Etman":d.profile.userName,e.article.tags=e.article.tags?e.article.tags.split(",").join(", "):"",e.article.isBlog="blog"===e.artType,e.article.topic="news",e.article.topic="svoboda.org",e.article.summary=t?t.contentSnippet:"Summary",e.article.section="Politics",e.article.svetRecommends=!1})}}}}])}(),function(){"use strict";angular.module("article").directive("svOneArticle",["userAuth","CommentsServ",function(e,t){return{replace:!0,scope:{news:"="},templateUrl:"scripts/article/directives/sv-one-article.html",link:function(n,r,i){n.params={sectionName:n.news.section},n.user=e.profile,n.rating1=5,n.rating2=2,n.isReadonly=!0,n.rateFunction=function(e){},n.$watch("news.comments",function(e,t){var r=[];if(e)for(var i=_.keys(e),o=0;o<i.length;o++){var s=i[o],a=e[s];a.$id=s,r.push(a)}n.comments=r}),n.removeComment=function(e){t.removeComment(n.news.$id,e).then(function(e){})}}}}])}(),function(){"use strict";angular.module("article").filter("articleBlogFr",function(){return function(e,t){var n=1==t;return _.filter(e,function(e){return e.isBlog===n})}})}(),function(){"use strict";angular.module("article").filter("authorFr",["userAuth",function(e){return function(t,n){return t?(n||(n=e.key),_.filter(t,function(e){return e.authorKey===n})):t}}])}(),function(){"use strict";angular.module("article").filter("length",function(){function e(e,t){if(e)return t=t||100,e.length<=t?e:e.substr(0,t)}return e})}(),function(){"use strict";angular.module("article").filter("authorNameFr",function(){return function(e){if(e&&_.isString(e))return _.map(e.split("-"),function(e){return _.capitalize(e)}).join(" ")}})}(),function(){"use strict";angular.module("article").filter("cut",["str",function(e){return function(t,n,r){if(!t)return"";if(n=parseInt(n,10),!n)return t;if(t.length<=n)return t;t=e(t,""),t=t.substr(0,n);var i=t.lastIndexOf(" ");return i!=-1&&(t=t.substr(0,i)),t+(r||" …")}}])}(),function(){"use strict";angular.module("article").filter("tagsFr",function(){return function(e,t){if(!e||!t)return e;var n=_.filter(e,function(e){var n=e.tags;if(n){if(n=n.trim().toLowerCase(),_.contains(n,","))var r=n.split(",");else r=n.split(" ");var i=_.map(r,function(e){return e.toLowerCase().trim()}),o=_.intersection(i,t);return o.length>0}});return _.take(n,3)}})}(),function(){"use strict";angular.module("article").filter("urlDecoderFr",function(){return function(e){if(e)return e.replace(/&#34;/g,'"')}})}(),function(){"use strict";angular.module("article").filter("articlePublic",function(){return function(e){return _.filter(e,function(e){return e.isPublic})}})}(),function(){"use strict";angular.module("article").factory("SvHtmlValidatorServ",["$q","$sanitize","url","users","$firebaseObject","$firebaseArray","$sce","str",function(e,t,n,r,i,o,s,a){return{validate:function(e){var n=!1;try{t(e);n=!0}catch(r){}return n},cleanArticle:function(e){return _.forOwn(e,function(n,r){if(_.isString(n)){var i=t(n);i=i.replace(/&#65533;/g,""),i=a(i,"unescapeHTML"),e[r]=i}}),e}}}])}(),function(){"use strict";angular.module("article").factory("ImageSearchServ",["$q","$http","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i,o){function s(e){e=e.replace(/[.,-\/#!$%\^&\*;:{}=\-_`~()]/g,"");var t=_.filter(e.split(" "),function(e){return e.length>a}),n=[],r=t.length-c;if(r<=0)return[t.join(" ")];for(var i=0;i<t.length-c;i++){for(var o=t[i],s=1;s<c;s++){var u=t[i+s];o+=" "+u}n.push(o)}return n}var n="https://ajax.googleapis.com/ajax/services/search/images?v=1.0&callback=JSON_CALLBACK&tbs=sur:f",a=3,c=4;return{fetch:function(r){var i=s(r),o=i.map(function(e){var r=n+"&q="+encodeURI(e);return t.jsonp(r)});return e.all(o)}}}])}(),function(){"use strict";angular.module("article").factory("NewsTimeSelectorServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{select:function(e){var t=e;return t}}}])}(),function(){"use strict";angular.module("article").factory("ArticlesServ",["NewsTimeSelectorServ","$rootScope","svetNews","$q","url","users","$firebaseObject","$firebaseArray","userAuth",function(e,t,n,r,i,o,s,a,c){function u(r){var i=e.select(r),o=_.where(i,{isPublic:!0,isBlog:!1}),s=t.langEng;o=_.filter(o,function(e){return s?e.tags&&e.tags.indexOf("english")>-1:!e.tags||e.tags&&e.tags.indexOf("english")===-1}),n["public"]=_.sortBy(o,"newsOrder"),t.news=n["public"]}function l(e){var t=$("<div></div>").append(e.body),n=t.find("img");if(n.length>0){var r=n[0];e.img=r.src}return e}function d(){return r(function(t,n){m.$loaded(function(){0===m.length&&t(1);var n=e.select(m),r=_.where(n,{isPublic:!0});if(0===r.length)t(1);else{var i=_.pluck(r,"newsOrder"),o=_.min(i);t(o-1)}t(r)})})}var f=new Firebase(i+"articles"),m=a(f);return{filterByLanguage:function(){return r(function(e,t){m.$loaded(function(){u(m),m.$watch(function(){u(m)}),e()})})},setHomeNewsLive:function(){return r(function(e,t){m.$loaded(function(){u(m),m.$watch(function(){u(m)}),e()})})},all:function(){return m},allPublic:function(){return r(function(e,t){m.$loaded().then(function(){var t=_.filter(m,function(e){return e.isPublic});e(t)})})},get:function(e){return s(f.child(e))},remove:function(e){return r(function(t,n){s(f.child(e)).$remove().then(function(){t()})})},getStatus:function(e,t){return r(function(n,r){var i=s(f.child(e).child(t));i.$loaded().then(function(){n(i.$value)})})},allObjRef:function(){return refObj},changeRank:function(e){return r(function(t,n){m.$loaded().then(function(){for(var n=0;n<e.length;n++){var r=e[n],i=_.find(m,{$id:r.$id});i.newsOrder=n+1,m.$save(i)}t()})})},computeNewsOrder:function(e){var t=this;return r(function(n,r){var i=s(f.child(e));i.$loaded(function(){i.isPublic?(i.isPublic=!1,i.$save().then(function(){var e=s(i.$ref().child("newsOrder"));e.$remove().then(function(){t.setHomeNewsLive().then(function(){n()})})})):d().then(function(e){i.newsOrder=e,i.isPublic=!0,i.$save().then(function(){t.setHomeNewsLive().then(function(){n()})})})})})},add:function(e,t){return e.isPublic=e.isPublic||t,e.timestamp=moment().format("x"),e.authorKey=c.key,e=l(e),r(function(t,n){if(e.$id){var r=f.child(e.$id),i=s(r);i.$loaded().then(function(){i=e,i.$save().then(function(e){i.fbkey=e.key(),i.$save().then(function(){t(i)})})})}else m.$add(e).then(function(e){var n=e.key(),r=e,i=s(r);i.$loaded().then(function(){i.fbkey=n,i.$save().then(function(e){t(i)})})},function(e){n(e)})})}}}])}(),function(){"use strict";angular.module("article").factory("BlogServ",["$q","url","users","$rootScope","$firebaseObject","$firebaseArray","lastEditorPost",function(e,t,n,r,i,o,s){function a(t){return e(function(e,n){var o=_.where(t,{isBlog:!0,isPublic:!0}),a=r.langEng;if(o=_.filter(o,function(e){return a?e.tags&&e.tags.indexOf("english")>-1:!e.tags||e.tags&&e.tags.indexOf("english")===-1}),o.length){var u=_.last(o),l=i(c.child(u.$id));l.$loaded(function(){s.post=l,e()})}else e()})}var c=new Firebase(t+"articles"),u=o(c);return{setLastBlogLive:function(){return e(function(e,t){u.$loaded(function(){u.$watch(function(){a(u).then(function(){})}),a(u).then(function(){e()})})})},getPost:function(e){var t=i(c.child(e));return t}}}])}(),function(){"use strict";angular.module("article").factory("SvobodaSaveToDbServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){var o=new Firebase(t+"/svoboda"),s=i(o);return{cleanSvoboda:function(){var t=[];return s.$loaded().then(function(){s.forEach(function(e){t.push(s.$remove(e))})}),e.all(t)},saveAll:function(t){var n=i(o),r=[];return t.forEach(function(e){r.push(n.$add(e))}),e.all(r)},getRandom:function(){return e(function(e,t){s.$loaded(function(){var t=_.random(0,s.length);e(s[t])})})}}}])}(),function(){"use strict";angular.module("article").factory("ArticleProcessServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{get:function(){},getAssync:function(){return e(function(e,t){})}}}])}(),function(){"use strict";angular.module("article").factory("SectionsServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){return{all:function(){var e=t+"sections",n=new Firebase(e),r=i(n);return r},getRandomSection:function(e){var t=Math.floor(Math.random()*e.length);return e[t].$id}}}])}(),function(){"use strict";angular.module("events",["ui.router","mwl.calendar"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.manager.create-event",{url:"/create-event",controller:"CreateSvetEventCtrl as createSvetEvent",templateUrl:"scripts/events/views/create-svet-eventCtrl.html"}).state("app.events",{url:"/events","abstract":!0,controller:"EventsCtrl as events",templateUrl:"scripts/events/views/eventsCtrl.html"}).state("app.events.calendar",{url:"/event-calendar",controller:"EventCalendarCtrl as eventCalendar",templateUrl:"scripts/events/views/event-calendarCtrl.html"}).state("app.events.field",{url:"/events/field-event/:year",controller:"FieldEventCtrl as fieldEvent",templateUrl:"scripts/events/views/field-eventCtrl.html"}).state("app.events.ravinia",{url:"/ravinia-event",controller:"RaviniaEventCtrl as raviniaEvent",templateUrl:"scripts/events/views/ravinia-eventCtrl.html"}).state("app.events.kohl2015",{url:"/kohl2015",controller:"Kohl2015Ctrl",templateUrl:"scripts/events/views/kohl2015Ctrl.html"}).state("app.events.kohl2016",{url:"/kohl2016",controller:"Kohl2016Ctrl",templateUrl:"scripts/events/views/kohl2016Ctrl.html"}).state("app.events.one-event",{url:"/one-event/:eid",controller:"OneEventCtrl",templateUrl:"scripts/events/views/one-eventCtrl.html"}).state("app.events.event-article",{url:"/event-article",controller:"Event-articleCtrl",templateUrl:"scripts/events/views/event-articleCtrl.html"}).state("app.events.kohl2015.photo-gallery",{url:"/photo-gallery/:photoId",controller:"One-event-galleryCtrl",templateUrl:"scripts/events/views/one-event-galleryCtrl.html"})}])}(),function(){"use strict";angular.module("events").controller("One-event-galleryCtrl",["$scope","$state","$stateParams",function(e,t,n){e.$parent.showEventInfo=!1,e.activeImg=_.isEmpty(n.photoId)?null:n.photoId,e.goBackToGallery=function(){e.$parent.showEventInfo=!0,t.go("^")}}])}(),function(){"use strict";angular.module("events").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{events:"Events","event-photo-gallery":"Event Photo Gallery","active-events":"Active Events","cancel-registration":"Cancel Registration","ended-events":"Ended Events","save-changes":"Save Changes","event-type":"Event Type","chicago-community-event":"Chicago Community Event","svet-connection-event":"Svet Connection Event","svet-public-event":"Svet Public Event","all-events":"All Events","activity-events":"Activity and Events","purchase-tickets":"Purchase Tickets","upcoming-events":"Upcoming Events","visited-events":"Visited Events","planned-events":"Planned Events","create-event":"Create an Event","svet-network-events":"Svet Network Events","svet-public-events":"Svet Public Events","new-event":"New Event",friends:"Friends","events-calendar":"Events 2017","upcoming-svet-event":"Upcoming Svet Event","event-ad-title":"SVET Annual Family Event","event-ad-body":"A very special and fun SVET Family Event at Kohl Children's Museum on May 5.","families-event":"Families are goings","join-tip":"Click to register for visiting this event","unlink-tip":"Click to un-register from visiting this event",join:"Register",unlink:"Un-register",accept:"Accept",reject:"Reject",accepted:"Accepted",rejected:"Rejected","quick-view":"Quick View"}),e.translations("ru",{"event-photo-gallery":"Event Photo Gallery","save-changes":"Сохранить Изменения",events:"Мероприятия","ended-events":"Прошедшие Мероприятия","cancel-registration":"Отменить регистрацию","event-type":"Тип Мероприятия","chicago-community-events":"Афиша Чикаго","chicago-community-event":"Мероприятие Чикаго","svet-connection-event":"Свет Бизнес-Мероприятие","svet-public-event":"Свет Публичное Мероприятие","all-events":"Афиша Чикаго","activity-events":"События и Мероприятия","purchase-tickets":"Приобрести билеты","upcoming-events":"Ближайшие События","visited-events":" Посещенные Мероприятия","planned-events":"Запланированные  Мероприятия","create-event":"Создать Мероприятие","new-event":"Новое Мероприятие","svet-public-events":"Свет Открытые Мероприятия","svet-network-events":"Свет Бизнес Мероприятия",friends:"Друзья","events-calendar":"Афиша 2017","upcoming-svet-event":"Свет Приглашает","event-ad-title":"Ежегодное Семейное Мероприятие Свет","event-ad-body":"5 Мая Свет пгиглашает на увлекательное мероприятие для всей семьи в Детском Музее Kohl.","families-event":"Семей Придут","join-tip":"Кликните чтобы зарегистрироваться","unlink-tip":"Отменить регистрацию на посещение",join:"Пойду",unlink:"Отменить",accept:"Принять",reject:"Отклонить",accepted:"Принят",rejected:"Отклонен","quick-view":"Быстрый просмотр"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("events").directive("svOneEventArticle",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-one-event-article.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").controller("Event-articleCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("events").controller("Kohl2015Ctrl",["$scope","$location",function(e,t){function n(){var e=o.$Elmt.parentNode.clientWidth;e?o.$ScaleWidth(Math.max(Math.min(e,960),300)):window.setTimeout(n,30)}e.showEventInfo=!0,e.imgesNumb=_.range(1,26);var r=[{$Duration:1200,$Zoom:1,$Easing:{$Zoom:$JssorEasing$.$EaseInCubic,$Opacity:$JssorEasing$.$EaseOutQuad},$Opacity:2},{$Duration:1e3,$Zoom:11,$SlideOut:!0,$Easing:{$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear},$Opacity:2},{$Duration:1200,$Zoom:1,$Rotate:1,$During:{$Zoom:[.2,.8],$Rotate:[.2,.8]},$Easing:{$Zoom:$JssorEasing$.$EaseSwing,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseSwing},$Opacity:2,$Round:{$Rotate:.5}},{$Duration:1e3,$Zoom:11,$Rotate:1,$SlideOut:!0,$Easing:{$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseInExpo},$Opacity:2,$Round:{$Rotate:.8}},{$Duration:1200,x:.5,$Cols:2,$Zoom:1,$Assembly:2049,$ChessMode:{$Column:15},$Easing:{$Left:$JssorEasing$.$EaseInCubic,$Zoom:$JssorEasing$.$EaseInCubic,$Opacity:$JssorEasing$.$EaseLinear},$Opacity:2},{$Duration:1200,x:4,$Cols:2,$Zoom:11,$SlideOut:!0,$Assembly:2049,$ChessMode:{$Column:15},$Easing:{$Left:$JssorEasing$.$EaseInExpo,$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear},$Opacity:2},{$Duration:1200,x:.6,$Zoom:1,$Rotate:1,$During:{$Left:[.2,.8],$Zoom:[.2,.8],$Rotate:[.2,.8]},$Easing:{$Left:$JssorEasing$.$EaseSwing,$Zoom:$JssorEasing$.$EaseSwing,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseSwing},$Opacity:2,$Round:{$Rotate:.5}},{$Duration:1e3,x:-4,$Zoom:11,$Rotate:1,$SlideOut:!0,$Easing:{$Left:$JssorEasing$.$EaseInExpo,$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseInExpo},$Opacity:2,$Round:{$Rotate:.8}},{$Duration:1200,x:-.6,$Zoom:1,$Rotate:1,$During:{$Left:[.2,.8],$Zoom:[.2,.8],$Rotate:[.2,.8]},$Easing:{$Left:$JssorEasing$.$EaseSwing,$Zoom:$JssorEasing$.$EaseSwing,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseSwing},$Opacity:2,$Round:{$Rotate:.5}},{$Duration:1e3,x:4,$Zoom:11,$Rotate:1,$SlideOut:!0,$Easing:{$Left:$JssorEasing$.$EaseInExpo,$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseInExpo},$Opacity:2,$Round:{$Rotate:.8}},{$Duration:1200,x:.5,y:.3,$Cols:2,$Zoom:1,$Rotate:1,$Assembly:2049,$ChessMode:{$Column:15},$Easing:{$Left:$JssorEasing$.$EaseInCubic,$Top:$JssorEasing$.$EaseInCubic,$Zoom:$JssorEasing$.$EaseInCubic,$Opacity:$JssorEasing$.$EaseOutQuad,$Rotate:$JssorEasing$.$EaseInCubic},$Opacity:2,$Round:{$Rotate:.7}},{$Duration:1e3,x:.5,y:.3,$Cols:2,$Zoom:1,$Rotate:1,$SlideOut:!0,$Assembly:2049,$ChessMode:{$Column:15},$Easing:{$Left:$JssorEasing$.$EaseInExpo,$Top:$JssorEasing$.$EaseInExpo,$Zoom:$JssorEasing$.$EaseInExpo,$Opacity:$JssorEasing$.$EaseLinear,$Rotate:$JssorEasing$.$EaseInExpo},$Opacity:2,$Round:{$Rotate:.7}},{$Duration:1200,x:-4,y:2,$Rows:2,$Zoom:11,$Rotate:1,$Assembly:2049,$ChessMode:{$Row:28},$Easing:{$Left:$JssorEasing$.$EaseInCubic,$Top:$JssorEasing$.$EaseInCubic,$Zoom:$JssorEasing$.$EaseInCubic,$Opacity:$JssorEasing$.$EaseOutQuad,$Rotate:$JssorEasing$.$EaseInCubic},$Opacity:2,$Round:{$Rotate:.7}},{$Duration:1200,x:1,y:2,$Cols:2,$Zoom:11,$Rotate:1,$Assembly:2049,$ChessMode:{$Column:19},$Easing:{$Left:$JssorEasing$.$EaseInCubic,$Top:$JssorEasing$.$EaseInCubic,$Zoom:$JssorEasing$.$EaseInCubic,$Opacity:$JssorEasing$.$EaseOutQuad,$Rotate:$JssorEasing$.$EaseInCubic},$Opacity:2,$Round:{$Rotate:.8}}],i={$AutoPlay:!1,$AutoPlayInterval:1500,$PauseOnHover:1,$DragOrientation:3,$ArrowKeyNavigation:!0,$SlideDuration:600,$SlideshowOptions:{$Class:$JssorSlideshowRunner$,$Transitions:r,$TransitionsOrder:1,$ShowLink:!0},$ArrowNavigatorOptions:{$Class:$JssorArrowNavigator$,$ChanceToShow:1,$AutoCenter:2,$Steps:1},$ThumbnailNavigatorOptions:{$Class:$JssorThumbnailNavigator$,$ChanceToShow:2,$ActionMode:1,$Lanes:2,$SpacingX:14,$SpacingY:12,$DisplayPieces:6,$ParkingPosition:156,$Orientation:2}},o=new $JssorSlider$("slider1_container",i);n(),$(window).bind("load",n),$(window).bind("resize",n),$(window).bind("orientationchange",n)}])}(),function(){"use strict";angular.module("events").controller("Kohl2016Ctrl",["$scope","$location",function(e,t){}]);
}(),function(){"use strict";angular.module("events").controller("OneEventCtrl",["$scope","$stateParams","ConnectionEventServ",function(e,t,n){var r=t.eid,i=n.get(r);i.$bindTo(e,"event")}])}(),function(){"use strict";angular.module("auth").controller("CreateSvetEventCtrl",["ConnectionEventServ","$scope","toastr","$state",function(e,t,n,r){function i(e){var t,n=moment(e.date).format("MM/DD/YYYY"),r=moment(e.startTime).format("LT");return e.endTime&&(t=n+" "+moment(e.endTime).format("LT")),e=_.omit(e,["date","startTime","endTime"]),e.startDate=n+" "+r,t&&(e.endTime=t),e.sentInvitations=!1,e}t.event={type:"corporates",title:"Svet Connection Meeting",description:"Svet Connection networking event helps to increase collaboration among Svet Russian Media Group Partners and build lasting relationships where all parties can help one another",date:new Date("01/06/2015"),startTime:new Date("01/06/2015 10:00:AM"),endTime:new Date("01/06/2015 1:00:PM"),address:"Viper Alley. 275 Parkway Dr Lincolnshire, IL 60069",admission:"Svet Partners"},t.createNewEvent=function(){var o=t.event;t.eventForm.$valid?(o=i(o),"corporate"===o.type?e.saveCorporateEvent(o).then(function(e){n.info("Event has been created."),r.go("app.manager.events")}):e.savePublicEvent(o).then(function(e){n.info("Event has been created."),r.go("app.manager.events")})):n.error("All required fields must be filled")}}])}(),function(){"use strict";angular.module("events").controller("EventCalendarCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("events").controller("EventsPhotoGalleryCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("events").controller("EventsCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("events").controller("FieldEventCtrl",["$scope","$stateParams",function(e,t){var n=this;n.year=t.year}])}(),function(){"use strict";angular.module("events").controller("RaviniaEventCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("events").directive("svEventWidget",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-widget.html",scope:{type:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svEventType",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-type.html",scope:{type:"@"},link:function(e,t,n){console.log("run here sv-event-type.js")}}})}(),function(){"use strict";angular.module("events").directive("svOneEventThumb",["$mdDialog","dt",function(e,t){return{replace:!0,templateUrl:"scripts/events/directives/sv-one-event-thumb.html",scope:{event:"=",hide:"&dialogHide"},link:function(n,r,i){function o(n){t.vm=n,e.show({controller:s,templateUrl:"scripts/events/views/modalContentInfo.html"})}function s(e,t,n){e.event=n.vm,e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}n.quickView=function(e,t){o(t)},console.log(n.event);s.$inject=["$scope","$mdDialog","dt"],n.isDialog=function(){return i.dialogHide}}}}])}(),function(){"use strict";angular.module("events").directive("svOneEvent",["userAuth","EventServ","toastr",function(e,t,n){return{replace:!0,templateUrl:"scripts/events/directives/sv-one-event.html",scope:{event:"=",hide:"&dialogHide"},link:function(r,i,o){r.user=e.profile,r.isRegistered=e.profile&&!!_.find(r.event.users,{userName:e.profile.userName}),console.log(r.isRegistered),r.isDialog=function(){return o.dialogHide},r.registerToEvent=function(){t.joinUser(e,r.event).then(function(){n.info("You have joined event"),r.isRegistered=!0})},r.unRegisterFromEvent=function(){t.unlinkUser(e,r.event.$id).then(function(){n.warning("You have unlinked from  event"),r.isRegistered=!1})}}}}])}(),function(){"use strict";angular.module("events").directive("svNewAfishaEventForm",["ConnectionEventServ","toastr",function(e,t){return{replace:!0,templateUrl:"scripts/events/directives/sv-new-afisha-event-form.html",link:function(n,r,i){n.editState?n.event.date=n.event.startsAt:(n.event={title:"",startsAt:moment(n.clickedDate).add(10,"h").startOf("hour").toDate(),endsAt:moment(n.clickedDate).add(13,"h").startOf("hour").toDate(),address:"",location:"",locationWeb:"http://.com",about:"",tickets:"http://www.ticketmaster.com/"},n.event.date=n.clickedDate),n.$watchCollection("$flow.files",function(e){if(e&&e.length){var t=_.last(e);n.$flow.files[0]=t;var r=t,i=new FileReader;i.readAsDataURL(r.file),i.onload=function(e){n.event.img=e.target.result}}}),n.createAfishaEvent=function(r){r&&e.savePublicEvent(n.event).then(function(){t.info("Thank you for creating an event."),n.hide()})}}}}])}(),function(){"use strict";angular.module("events").directive("svSvetEventsCalendar",["$mdDialog","dt","ConnectionEventServ","svetEventsConst","toastr","userAuth",function(e,t,n,r,i,o){return{templateUrl:"scripts/events/directives/sv-svet-events-calendar.html",link:function(s,a,c){s.user=o.profile,s.calendarYear=function(){s.calendarView="year"},s.calendarMonth=function(){s.calendarView="month"},n.setEventsLive().then(function(){function o(n){t.vm=n,e.show({controller:c,templateUrl:"scripts/events/views/modalContentInfo.html"})}function a(e,t,n){e.clickedDate=n.clickedDate,e.event=n.event,e.editState=n.editState,e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}function c(e,t,n){e.event=n.vm,e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}s.eventsLoaded=!0,s.calendarView="year",s.calendarDay=new Date,s.events=r.evts,console.log(s.events),s.eventClicked=function(e,t){o(t)},s.eventEdited=function(n){t.event=n,t.editState=!0,e.show({controller:a,templateUrl:"scripts/events/views/modalContent.html"})},s.eventDeleted=function(t){e.show({controller:["$scope","$mdDialog",function(e,t){e["delete"]=function(){t.hide(!0)},e.cancel=function(){t.cancel()}}],templateUrl:"scripts/common/views/modalDeleteConfirm.html"}).then(function(){n.removePublicWithKey(t.$id).then(function(){i.warning("Events removed")})},function(){i.info("Events removal canceled")})},s.newEvent=function(n){var r=moment(),i=r.hour(),o=r.minute();t.clickedDate=n||r.subtract(i,"hours").subtract(o,"minutes").toDate(),t.event=null,t.editState=!1,e.show({controller:a,templateUrl:"scripts/events/views/modalContent.html"})},a.$inject=["$scope","$mdDialog","dt"],c.$inject=["$scope","$mdDialog","dt"]})}}}])}(),function(){"use strict";angular.module("auth").directive("svEventBtn",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-btn.html",scope:{btnTitle:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svEventFamilies",["EventServ",function(e){function t(e){return _.filter(e.familiesNumberObj,function(e){return _.isObject(e)})}return{replace:!0,templateUrl:"scripts/events/directives/sv-event-families.html",scope:{families:"@",eventKey:"@"},link:function(n,r,i){var o=e.getUsersObjectRef(n.eventKey);o.$bindTo(n,"familiesNumberObj").then(function(){n.familiesLoaded=!0,n.familiesNumber=t(n),o.$watch(function(){n.familiesNumber=t(n)})})}}}])}(),function(){"use strict";angular.module("events").directive("svEventsList",["ConnectionEventServ","svetEventsConst",function(e,t){return{replace:!0,templateUrl:"scripts/events/directives/sv-events-list.html",scope:{events:"=",eventFilter:"@"},link:function(e,n,r){e.isFuture=!0,e.$watchCollection(function(){return t.evts},function(t,n){t!==n&&(e.evtsReady=!0,console.log(t[0]))}),e.svShowEvetsFrom=function(t){"future"===t&&(e.isFuture=!0),"past"===t&&(e.isFuture=!1)}}}}])}(),function(){"use strict";angular.module("events").directive("svEventsNav",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-events-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svEventSidenavAd",["$mdSidenav",function(e){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-sidenav-ad.html",scope:{eventTitle:"@",body:"@"},link:function(t,n,r){t.closeSideBar=function(){e("left").close(),e("right").close()}}}}])}(),function(){"use strict";angular.module("events").directive("svEventSidenavAd2015",["$mdSidenav",function(e){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-sidenav-ad-2015.html",scope:{eventTitle:"@",body:"@"},link:function(t,n,r){t.closeSideBar=function(){e("left").close(),e("right").close()}}}}])}(),function(){"use strict";angular.module("events").directive("svJoinBtn",["EventServ","userAuth","toastr","$state",function(e,t,n,r){return{templateUrl:"scripts/events/directives/sv-join-btn.html",require:["svJoinBtn","^?svEventSidenavAd","^?svKohlEvent2015"],scope:{titleJoin:"@",titleUnlink:"@",joinTip:"@",unlinkTip:"@",btnSize:"@"},bindToController:{eventKey:"@"},controllerAs:"ctrl",controller:["$scope",function(e){}],link:function(i,o,s,a){var c=a[0];i.$watch(function(){return t.profile},function(e,t){i.user=e});var u=e.getUsersArrayRef(c.eventKey);u.$loaded().then(function(){if(t.profile){var e=_.find(u,{id:t.profile.id});c.isUserJoined=!!e,u.$watch(function(e){var n=_.find(u,{id:t.profile.id});c.isUserJoined=!!n})}}),c.joinEvent=function(){e.joinUser(i.user,c.eventKey).then(function(){n.success("Thank you for joining event. See you then."),r.go("app.events.field",{year:2015})})},c.unlinkEvent=function(){e.unlinkUser(i.user,c.eventKey).then(function(){n.warning("You were unlinked from our Event")})}}}}])}(),function(){"use strict";angular.module("events").directive("svSlideShow",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-slide-show.html",scope:{numb:"=",path:"@",type:"@"},link:function(e,t,n){e.slides=[];for(var r=1;r<=e.numb;r++){var i={url:e.path+"/"+r+"."+e.type};e.slides.push(i)}}}})}(),function(){"use strict";angular.module("events").directive("svKohlEvent2014",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-kohl-event-2014.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svKohlEvent2015",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-kohl-event-2015.html",scope:{},link:function(e,t,n){e.setRegisteredUsers=function(t){e.userNumbers=t}}}})}(),function(){"use strict";angular.module("events").directive("svRaviniaEvent",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-ravinia-event.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svEventArticleThumbRu",function(){return{templateUrl:"scripts/events/directives/sv-event-article-thumb-ru.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").directive("svEventArticleThumbEn",function(){return{replace:!0,templateUrl:"scripts/events/directives/sv-event-article-thumb-en.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("events").filter("previosFutureFr",function(){return function(e,t){return _.filter(e,function(e){return t?moment().isBefore(e.startsAt):moment().isAfter(e.startsAt)})}})}(),function(){"use strict";angular.module("events").filter("noticeStatus",function(){return function(e,t){if(e)return _.where(e,{opened:t})}})}(),function(){"use strict";angular.module("events").filter("eventsInvitation",["userAuth",function(e){return function(t,n){if(t&&0!==t.length&&e.profile){var r=[],i=e.profile.userName;if(0==n)for(var o=0;o<t.length;o++){var s=t[o],a=_.pluck(s.customers,"userName");a.indexOf(i)>-1&&r.push(s)}if(2==n)for(var o=0;o<t.length;o++){var s=t[o],a=_.pluck(s.customers,"userName");a.indexOf(i)===-1&&r.push(s)}return r}}}])}(),function(){"use strict";angular.module("events").filter("eventsType",function(){return function(e,t){if(!t||"all"===t||0===e.length)return e;var n=_.filter(e,{type:t});return n}})}(),function(){"use strict";angular.module("events").factory("EventServ",["$q","url","$firebaseArray","$firebaseObject","NotificationsServ",function(e,t,n,r,i){var o=t+"events/public/";return{joinUser:function(t,r){var s=r.$id;return e(function(e,a){var c=o+s+"/users/",u=n(new Firebase(c)),l=_.pick(t.profile,"userName","avatar");u.$add(l).then(function(t){var n={note:l.userName.toUpperCase()+" accepts "+r.title,timestamp:moment().format("x"),opened:!1,eid:r.$id};i.addToManagers(n).then(function(){e()})})})},unlinkUser:function(t,r){return e(function(e,i){var s=o+r+"/users/",a=n(new Firebase(s));a.$loaded().then(function(){for(var n=_.filter(a,{userName:t.profile.userName}),r=0;r<n.length;r++){var i=n[r];!function(e){a.$remove(e)}(i)}e()})})},getUsersArrayRef:function(e){var t=o+e+"/users/",r=n(new Firebase(t));return r},getUsersObjectRef:function(e){var t=o+e+"/users/",n=r(new Firebase(t));return n}}}])}(),function(){"use strict";angular.module("events").factory("ConnectionEventServ",["NotificationsServ","$q","url","$firebaseArray","$firebaseObject","svetEventsConst",function(e,t,n,r,i,o){function s(e){var t=moment(e.date),n=moment(e.startsAt).hour(),r=moment(e.startsAt).minute(),i=t.startOf("day").add({h:n,m:r});return e=_.omit(e,"date","startsAt","endsAt"),e.startsAt=i.format("x"),e.endsAt=i.add(2,"h").startOf("hour").format("x"),e}function a(e){for(var t=0;t<e.length;t++){var n=e[t];n.svId=n.$id,n.startsAt=moment(n.startsAt,"x").toDate(),n.endsAt=moment(n.endsAt,"x").toDate()}return e}var c=n+"/events/corporate/",u=n+"/events/public/";return{get:function(e){var t=u+e,n=new Firebase(t),r=i(n);return r},setEventsLive:function(){return t(function(e,t){var n=r(new Firebase(u));n.$loaded(function(){o.evts=a(n),console.log(n),e()})})},removePublicWithKey:function(e){return t(function(t,n){var r=i(new Firebase(u+e));r.$remove().then(function(){t()})})},allCorporate:function(){var e=r(new Firebase(c));return e},allPublic:function(){var e=r(new Firebase(c));return e},saveCorporateEvent:function(n){return t(function(t,i){var o=r(new Firebase(c));o.$add(n).then(function(r){var i={note:n.title,timestamp:moment().format("x"),opened:!1,eid:r.key()};e.addToCustomers(i).then(function(){t()})})})},savePublicEvent:function(n){return n=s(n),t(function(t,o){if(n.$id){var s=i(new Firebase(u+n.$id));s.$loaded().then(function(){_.extend(s,n),s.$save().then(function(){t()})})}else{var a=r(new Firebase(u));a.$add(n).then(function(r){if("connection"===n.type){var i={note:n.title,timestamp:moment().format("x"),opened:!1,eid:r.key()};e.addToCustomers(i).then(function(){t()})}else t()})}})},addCustomerToEvent:function(n,i){return t(function(t,o){var s=r(new Firebase(c+n.$id+"/customers"));s.$add(i).then(function(r){var o={note:i.userName+" accepts "+n.title,timestamp:moment().format("x"),opened:!1};e.addToManagers(o).then(function(){t(r)})})})},removeCustomerFromEvent:function(e,n){return t(function(t,i){var o=r(new Firebase(c+e.$id+"/customers"));o.$loaded().then(function(){for(var e=0;e<o.length;e++){var r=o[e];if(r.userName===n.userName){o.$remove(r).then(function(){t()});break}}})})}}}])}(),function(){"use strict";angular.module("sections.archive",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.svet-newspaper",{url:"/svet-newspaper",controller:"SvetNewspaperCtrl as svetNewspaper",templateUrl:"scripts/sections/archive/views/svetNewspaperCtrl.html"})}])}(),function(){"use strict";angular.module("sections.archive").controller("SvetNewspaperCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("sections.archive").directive("svNavPdfThumb",["$rootScope","$mdSidenav",function(e,t){return{replace:!0,templateUrl:"scripts/sections/archive/directives/sv-nav-pdf-thumb.html",scope:{url:"@",img:"@"},link:function(e,n,r){e.closeSideBar=function(){t("left").close(),t("right").close()}}}}])}(),function(){"use strict";angular.module("sections.archive").directive("svPdfNewspaperThumb",function(){return{replace:!0,templateUrl:"scripts/sections/archive/directives/sv-pdf-newspaper-thumb.html",scope:{issue:"=",startIssue:"=",index:"="},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.archive").directive("svPdfIssues",function(){return{replace:!0,templateUrl:"scripts/sections/archive/directives/sv-pdf-issues.html",scope:{isSaturday:"=",startIssue:"=",issuesToShow:"="},link:function(e,t,n){var r="assets/archive/svet-newspaper/";e.issues=[];for(var i=e.startIssue;i<=e.startIssue+e.issuesToShow;i++){var o={number:i,img:"svet-newspaper",url:r+"index.html"};e.issues.push(o)}}}})}(),function(){"use strict";angular.module("auth").factory("PdfSubscriptionsServ",["$q","users","$firebaseObject","userAuth",function(e,t,n,r){return{getObjectRef:function(){var e=r;if(!e)return null;var i=e.key,o=t+i+"/profile/subscription";return n(new Firebase(o))}}}])}(),function(){"use strict";angular.module("sections.about",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.about",{"abstract":!0,url:"/about",controller:"AboutCtrl",templateUrl:"scripts/sections/about/views/aboutCtrl.html"}).state("app.about.about-tab-content",{url:"/svet-russian-media-group",templateUrl:"scripts/sections/about/views/about-tab-contentCtrl.html"}).state("app.about.demographics-tab-content",{url:"/russian-speaking-demographics",controller:"DemographicsTabContentCtrl",templateUrl:"scripts/sections/about/views/demographics-tab-contentCtrl.html"}).state("app.about.google-analytics",{url:"/google-analytics",templateUrl:"scripts/sections/about/views/google-analyticsCtrl.html"})}])}(),function(){"use strict";angular.module("sections.about").controller("AboutCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("sections.about").controller("DemographicsTabContentCtrl",["$scope","$mdDialog",function(e,t){function n(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.showDemographicsMapModal=function(){t.show({controller:n,templateUrl:"scripts/sections/demographics/views/modalDemographicsMap.html"})},n.$inject=["$scope","$mdDialog"]}])}(),function(){"use strict";angular.module("sections.about").controller("AboutTabContentCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("sections.about").controller("GoogleAnalyticsCtrl",["$scope",function(e){}])}(),function(){"use strict";angular.module("sections.about").directive("svAboutTabs",["$mdDialog","$state",function(e,t){return{replace:!0,templateUrl:"scripts/sections/about/directives/sv-about-tabs.html",scope:{},link:function(e,n,r){var i=t.current.name;i&&_.contains(i,"demographics")&&(e.selectedIndex=1)}}}])}(),function(){"use strict";angular.module("sections.about").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.about").directive("svAboutSvet",function(){return{replace:!0,templateUrl:"scripts/sections/about/directives/sv-about-svet.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.about").directive("svTopRuSpeaking",["$mdDialog",function(e){return{replace:!0,templateUrl:"scripts/sections/about/directives/sv-top-ru-speaking.html",scope:{},link:function(t,n,r){function i(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}t.showDemographicsMapModal=function(){e.show({controller:i,templateUrl:"scripts/sections/demographics/views/modalDemographicsMap.html"})},i.$inject=["$scope","$mdDialog"]}}}])}(),function(){"use strict";angular.module("sections.demographics",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("sections.demographics").directive("svOpenDialogBtn",["feedbackConst",function(e){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-open-dialog-btn.html",scope:{modalMethod:"&",btnImgIcon:"@",imgWidth:"@",imgHeight:"@",linkName:"@"},link:function(t,n,r){t.imgWidth=t.imgWidth||"24px",t.imgHeight=t.imgHeight||"24px",t.beforeModalMethod=function(){e.feedback&&(e.feedback=null),t.modalMethod()}}}}])}(),function(){"use strict";angular.module("sections.demographics").directive("svRuAttractiveMarket",function(){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-ru-attractive-market.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.demographics").directive("svTopRuStates",function(){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-top-ru-states.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.demographics").directive("svRuDemographics",function(){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-ru-demographics.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.demographics").directive("svDemographicsTabs",function(){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-demographics-tabs.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.demographics").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.demographics").directive("svDemographicsHeaderBtn",["$state",function(e){return{replace:!0,templateUrl:"scripts/sections/demographics/directives/sv-demographics-header-btn.html",scope:{},link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("sections.testimonials",[]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.testimonials",{url:"/testimonials",controller:"TestimonialsCtrl",templateUrl:"scripts/sections/testimonials/views/testimonialsCtrl.html"})}])}(),function(){"use strict";angular.module("sections.testimonials").constant("feedbackConst",{}).directive("svOneFeedback",["userAuth","$mdDialog","feedbackConst","FeedbackServ","toastr",function(e,t,n,r,i){return{replace:!0,templateUrl:"scripts/sections/testimonials/directives/sv-one-feedback.html",scope:{feedback:"=",showFeedbackModal:"&"},link:function(t,o,s){t.user=e.profile,t.user.key=e.key,t.isEditState=!1,t.editFeedback=function(){n.feedback=angular.copy(t.feedback),t.showFeedbackModal()},t.removeSvFeedback=function(e){r.removeFeedback(e.$id).then(function(){i.warning("Feedback has been successfully deleted.")})}}}}])}(),function(){"use strict";angular.module("sections.testimonials").directive("svFeedbackList",["FeedbackServ",function(e){return{replace:!0,templateUrl:"scripts/sections/testimonials/directives/sv-feedback-list.html",scope:{showFeedbackModal:"&"},link:function(t,n,r){var i=e.all();i.$loaded().then(function(){t.feedbacks=i,i.$watch(function(){t.feedbacks=i})})}}}])}(),function(){"use strict";angular.module("sections.testimonials").factory("FeedbackServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){var o=new Firebase(t+"feedbacks");return{saveFeedback:function(t){return e(function(e,n){if(t.$id){var s=r(o.child(t.$id));s.$loaded().then(function(){s=_.extend(s,t),s.$save().then(function(){e()})})}else{var a=i(o);a.$add(t).then(function(t){e(t.key())})["catch"](function(e){n(e)})}})},removeFeedback:function(t){return e(function(e,n){var i=r(o.child(t));i.$loaded().then(function(){i.$remove().then(function(){e()})})})},all:function(){return i(o)}}}])}(),function(){"use strict";angular.module("sections.testimonials").directive("svAddFeedback",["FeedbackServ","userAuth","toastr","$mdDialog",function(e,t,n,r){return{replace:!0,templateUrl:"scripts/sections/testimonials/directives/sv-add-feedback.html",scope:{feedback:"="},link:function(i,o,s){function a(){i.feedback={body:"",company:"",authorKey:""}}function c(){t.profile&&(i.feedback.authorKey=t.key,i.feedback.timestamp=moment().format("x"))}i.feedback||a(),i.user=t.profile,i.submitFeedback=function(){c(),e.saveFeedback(i.feedback).then(function(e){n.success("Your feedback has been successfully added"),r.hide(),a()})["catch"](function(e){n.warning(e)})}}}}])}(),function(){"use strict";angular.module("sections.testimonials").directive("svOneClientLink",function(){return{replace:!0,templateUrl:"scripts/sections/testimonials/directives/sv-one-client-link.html",scope:{webAddress:"@",clientLogo:"@",imgWidth:"@",imgHeight:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.testimonials").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.testimonials").controller("TestimonialsCtrl",["$scope","$mdDialog",function(e,t){function n(e,t,n){n.feedback&&(e.feedback=n.feedback),e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.showFeedbackModal=function(){t.show({controller:n,templateUrl:"scripts/sections/testimonials/views/modalFeedback.html"})},n.$inject=["$scope","$mdDialog","feedbackConst"]}])}(),function(){"use strict";angular.module("sections.contact",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.contact",{url:"/contact",controller:"ContactCtrl",templateUrl:"scripts/sections/contact/views/contactCtrl.html"}).state("app.get-svoboda-news",{url:"/get-svoboda-news",controller:"GetSvobodaNewsCtrl",templateUrl:"scripts/sections/contact/views/get-svoboda-newsCtrl.html"})}])}(),function(){"use strict";angular.module("sections.contact").directive("svContactUs",function(){return{replace:!0,templateUrl:"scripts/sections/contact/directives/sv-contact-us.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.contact").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.contact").controller("ContactCtrl",["$scope","$mdDialog",function(e,t){function n(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.showContactMapModal=function(){t.show({controller:n,templateUrl:"scripts/sections/demographics/views/modalContactUsMap.html"})},n.$inject=["$scope","$mdDialog"]}])}(),function(){"use strict";angular.module("sections.contact").controller("GetSvobodaNewsCtrl",["$scope","toastr","NewsGeneratorServ",function(e,t,n){e.regenerate=function(){n.getGenerateNewsWithImages().then(function(){t.info("Svoboda news updated")})}}])}(),function(){"use strict";angular.module("sections.header",["ui.router","flow"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("sections.header").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{}),e.translations("ru",{}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.header").directive("svHeaderSubscriptionBtn",function(){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-header-subscription-btn.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.header").directive("svSocialTopNavCell",["$mdBottomSheet",function(e){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-social-top-nav-cell.html",scope:{},controller:["$scope","$timeout",function(t,n){t.alert="",t.showListBottomSheet=function(n){t.alert="",e.show({templateUrl:"scripts/common/templates/social-top-nav-cell.html",targetEvent:n}).then(function(e){t.alert=e.name+" clicked!"})},t.listItemClick=function(n){var r=t.items[n];e.hide(r)}}]}}])}(),function(){"use strict";angular.module("sections.header").directive("svLangSwitch",["$translate","$rootScope","ArticlesServ",function(e,t,n){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-lang-switch.html",scope:{},link:function(r,i,o){var s=e.use();r.langEng="en"==s,t.langEng="en"==s,r.changeLanguage=function(i){e.use(i),r.langEng="en"==i,t.langEng="en"==i,n.filterByLanguage().then(function(){t.$broadcast("homeNewsChanged")})}}}}])}(),function(){"use strict";angular.module("sections.header").directive("svSocialTopNav",function(){return{replace:!0,templateUrl:"scripts/sections/header/directives/sv-social-top-nav.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.home").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{SvetNewspaper:"Svet Newspaper","for-readers-and-partners":"For Readers and Partners","new-svet":"New Svet","saturday-plus":"Saturday+",PdfNewspaperArchive:"PDF NEWSPAPER ARCHIVE","svet-on-social-media":"Svet on social media",contacts:"Contact Us",youtube:"Youtube Сhannel",loading:"Loading News","read-more":"Read More",listen:"Listen",archive:"Archive","from-the-editor":"From The Editor","from-the":"From the",editor:"Editor","interesting-stories":"Interesting Stories",svetApp:"Svet Local App",home:"Home Page",politics:"Politics",business:"Business",banking:"Banking",world:"World News",technology:"Technology",showtime:"Showtime",sport:"Sport",health:"Health",restaurants:"Restaurants",travel:"Travel"}),e.translations("ru",{SvetNewspaper:"Газета Свет","for-readers-and-partners":"Читателям и Партнерам","new-svet":"Новый Свет","svet-on-social-media":"Свет в медиа",svetApp:"Приложение Svet","saturday-plus":"Суббота+",PdfNewspaperArchive:"PDF Архив Газеты",contacts:"Обратная связь",loading:"Загрузка Новостей","read-more":"Подробнее",youtube:"Youtube Канал",listen:"Cлушать",archive:"Архив","from-the-editor":"От Редактора","from-the":"От",editor:"Редактор","interesting-stories":"Интерестные Истории",home:"Домашняя страница",politics:"Политика",business:"Бизнес",banking:"Банковское Дело",world:"Новости Мира",technology:"Технологии","":"Культура",sport:"Спорт",health:"Здоровье ",restaurants:"Кушать подано",travel:"Вокруг Света"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.home").controller("HomeCtrl",["$scope","userAuth","svetNews","$timeout",function(e,t,n,r){e.user=t.profile,e.news=n["public"]}])}(),function(){"use strict";angular.module("sections.home").controller("AppCtrl",["$sce","AgentServ","NotificationsServ","userAuth","svetNews","$timeout","$mdSidenav","$mdMedia","NewsProcessServ","$state","$scope","$rootScope","toastr","routesRadioShow",function(e,t,n,r,i,o,s,a,c,u,l,d,f,m){d.$mdMedia=a,d.frameUrl=e.trustAsResourceUrl("http://localhost"),d.user=r.profile,d.news=i["public"],d.$on("homeNewsChanged",function(){d.news=i["public"]});var v=u.current;"/"===v.url?d.radioShow=!0:d.radioShow=!1,d.$on("$stateChangeSuccess",function(e,t,n,r,i,o){var s=t.name;_.contains(m,s)?d.radioShow=!0:d.radioShow=!1}),d.$on("$stateChangeError",function(e,t,n,r,i,o){f.warning(o)}),d.$on("error",function(){f.error("error")}),l.$on("image-search-show",function(){l.imageSearch=!0}),l.$on("image-search-hide",function(){l.imageSearch=!1}),l.isIe=t.isIe(),d.toggleLeft=function(){s("left").toggle()},d.toggleRight=function(){s("right").toggle()},d.$watch("appLoaded",function(e){l.appLoaded=e}),l.$watch(function(){return a("gt-lg")},function(e){e?l.showShifter=!t.isIe():l.showShifter=!0})}])}(),function(){"use strict";angular.module("article").directive("svTopNews",["$sce","$rootScope",function(e,t){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-top-news.html",scope:{news:"="},link:function(n,r,i){n.topNews=_.first(n.news),n.safeParsing=function(t){return e.trustAsHtml(t)},t.$on("homeNewsChanged",function(){n.topNews=_.first(t.news)})}}}])}(),function(){"use strict";angular.module("sections.home").directive("svFromTheEditor",["alex",function(e){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-from-the-editor.html",scope:{},link:function(t,n,r){t.alex=e}}}])}(),function(){"use strict";angular.module("sections.home").directive("svSectionNews",["$rootScope",function(e){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-section-news.html",scope:{sectionName:"@"
},link:function(t,n,r){t.news=_.map(_.filter(e.newsList,function(e){return e.section==t.sectionName}),function(e){return e}),t.$watch("newsList",function(e){e&&(t.news=_.filter(e,function(e){return e.section==t.sectionName}))})}}}])}(),function(){"use strict";angular.module("sections.home").directive("svNewsGrid",["$rootScope",function(e){return{replace:!0,scope:{news:"=",exclude:"=",filterSection:"@",withoutSection:"@"},templateUrl:"scripts/sections/home/directives/sv-news-grid.html",link:function(e,t,n){e.$watch("news",function(t,n){t&&(e.gridNews=_.slice(t,3))})}}}])}(),function(){"use strict";angular.module("sections.home").directive("svSecondNews",function(){return{templateUrl:"scripts/sections/home/directives/sv-second-news.html",scope:{lowerLimit:"=",higherLimit:"=",news:"="},link:function(e,t,n){e.$watch("news",function(t,n){t&&(e.secondaryNews=_.rest(_.take(t,3)))})}}})}(),function(){"use strict";angular.module("sections.home").directive("svSectionSelectHandler",["$rootScope",function(e){return{link:function(t,n,r,i){n.on("click",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){t.setSection(t.s.$id),e.$broadcast("close:dropdown")})}),n.on("touchstart",function(n){n.preventDefault(),n.stopPropagation(),t.$apply(function(){t.setSection(t.s.$id),e.$broadcast("close:dropdown")})})}}}])}(),function(){"use strict";angular.module("sections.home").directive("svSvetSocial",["$mdBottomSheet",function(e){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-svet-social.html",link:function(e,t,n){}}}])}(),function(){"use strict";angular.module("sections.home").directive("svHomeMainNews",function(){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-home-main-news.html",scope:{nt:"="},link:function(e,t,n){e.nt}}})}(),function(){"use strict";angular.module("sections.home").directive("svNewsSectionsNav",["$mdSidenav",function(e){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-news-sections-nav.html",link:function(t,n,r){t.closeSideBar=function(){e("left").close(),e("right").close()}}}}])}(),function(){"use strict";angular.module("article").factory("NewsProcessServ",function(){return{get:function(e){var t=[],n=[],r=[],i=!1;_.forInRight(e,function(e,t){_.isObject(e)&&(e.isTopNews&&!i?(n.push(e),i=!0):e.title&&e.body&&r.push(e))});for(var o=0;o<n.length;o++){var s=n[o],a={top:s,n2:r.splice(0,1)[0],n3:r.splice(0,1)[0]};t.push(a)}return{trios:t,newsGrid:r}}}})}(),function(){"use strict";angular.module("sections.home").factory("NewsServ",["$q","url","$firebaseArray",function(e,t,n){n(new Firebase(t+"articles/"));return{getSync:function(){},get:function(){return e(function(e,t){})}}}])}(),function(){"use strict";angular.module("sections.radio",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("app.radio-archive",{url:"/radio-archive",controller:"RadioArchiveCtrl",templateUrl:"scripts/sections/radio/views/radio-archiveCtrl.html"}).state("app.radio-archive.program",{url:"/:radioId",controller:"RadioProgramCtrl",templateUrl:"scripts/sections/radio/views/radio-programCtrl.html"})}])}(),function(){"use strict";angular.module("sections.radio").directive("svHeaderRadioBtn",function(){return{replace:!0,templateUrl:"scripts/sections/radio/directives/sv-header-radio-btn.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.radio").controller("RadioProgramCtrl",["$stateParams","$scope","RadioProgramsServ","youtubeBase","$sce",function(e,t,n,r,i){var o,s=e.radioId;t.program=n.get(s);var a=new RegExp("^http");t.program.$loaded().then(function(){console.log(t.program),t.program.guests=_.toArray(t.program.guests).map(function(e){return e.webUrl.match(a)||(e.webUrl="http://"+e.webUrl),e})}),o=s.length>8?s.substr(1):s,t.dt=moment(o,"YYYYMMDD").format("LL"),t.convertUrl=function(e){var t=r+e;return i.trustAsResourceUrl(t)}}])}(),function(){"use strict";angular.module("sections.radio").factory("RadioProgramsServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){var o=new Firebase(t+"radioWidget"),s=i(o);return{all:function(){return s},get:function(e){var t=r(o.child(e));return t}}}])}(),function(){"use strict";angular.module("sections.radio").controller("RadioArchiveCtrl",["$scope","RadioProgramsServ","$sce",function(e,t,n){var r=t.all();r.$loaded().then(function(t){e.programs=_.map(t.reverse(),function(e){return e.$id.length>8?e.date=e.$id.substr(1):e.date=e.$id,e.date=moment(e.date,"YYYYMMDD").format("LL"),e})})}])}(),function(){"use strict";angular.module("sections.radio").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{radio:"Radio","radio-subhead-1":" Radio Talk show","radio-subhead-2":" With Alexander Etman","alex-etman":" Alexander Etman","radio-body-1":"Every Sunday ","radio-body-2":"on 1240AM","radio-body-3":"11:00 AM - 1:00 PM.","radio-archive":"Radio Programs Archive","radio-files-archive":"Archive",back:"Back"}),e.translations("ru",{"alex-etman":" Александр Этман",radio:"Радио","radio-subhead-1":"Радио Tок-шоу","radio-subhead-2":"с Александром Этманом","radio-body-1":"Каждое воскресенье","radio-body-2":"на 1240AM","radio-body-3":"11:00 - 13:00 ","radio-archive":"Архивные передачи","radio-files-archive":"Архив передач",back:"Вернуться"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.radio").factory("RadioServ",["$q","url","users","$firebaseObject","$firebaseArray",function(e,t,n,r,i){var o=new Firebase(t+"radio");return{getAllPrograms:function(){return e(function(e,t){var n=i(o),r=[],s="mms://strean.imcpro.com/svet/";n.$loaded().then(function(){for(var t=0;t<n.length;t++){var i=n[t].$id,o=moment(i).format("x"),a=s+i+".asf";r.push({prDate:o,mms:a})}e(r)})})}}}])}(),function(){"use strict";angular.module("sections.home").directive("svClassifiedHeaderPhone",function(){return{replace:!0,templateUrl:"scripts/sections/home/directives/sv-classified-header-phone.html",scope:{},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.radio").directive("svRadioOsa",function(){return{replace:!0,templateUrl:"scripts/sections/radio/directives/sv-radio-osa.html",scope:{title:"@",subhead:"@",body:"@"},link:function(e,t,n){}}})}(),function(){"use strict";angular.module("sections.widgets",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){}])}(),function(){"use strict";angular.module("sections.widgets").config(["$translateProvider",function(e){e.useCookieStorage(),e.translations("en",{weather:"Chicago weather",forecast:"Weekly Forecast",degrees:"F",Tomorrow:"Tomorrow",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sunday:"Sunday"}),e.translations("ru",{weather:"Погода в Чикаго",forecast:"Прогноз на Неделю",degrees:"C",Tomorrow:"Завтра",Monday:"Понедельник",Tuesday:"Вторник",Wednesday:"Среда",Thursday:"Четверг",Friday:"Пятница",Saturday:"Суббота",Sunday:"Воскресенье"}),e.preferredLanguage("en")}])}(),function(){"use strict";angular.module("sections.widgets").directive("svWeatherSvet",["WeatherServ","$translate",function(e,t){return{replace:!0,templateUrl:"scripts/sections/widgets/directives/sv-weather-svet.html",scope:{},link:function(n,r,i){n.tempConverter=function(e){if("ru"===t.use()){var n=((e-32)/1.8).toFixed(1);return n}return e},n.forecastReady=!1,e.forecast().then(function(e){n.forecast=e,n.forecastReady=!0})}}}])}(),function(){"use strict";angular.module("sections.widgets").filter("Celsius",function(){return function(e,t){return"ru"===t?((e-32)/1.8).toFixed(1):e}})}(),function(){"use strict";angular.module("sections.widgets").factory("WeatherServ",["$q","weather","$firebaseObject",function(e,t,n){function r(e){var t=e.indexOf(" at");return t===-1?e:e.substr(0,t)}function i(e){var t={};t.curr={icon:e.currently.icon,temp:e.currently.apparentTemperature.toFixed(1)};for(var n=e.daily.data,i=[],o=0;o<n.length;o++){var s=n[o],a=((s.apparentTemperatureMax+s.apparentTemperatureMin)/2).toFixed(1),c={date:r(moment().add(o+1,"days").calendar()),icon:s.icon,temp:a};i.push(c)}return i[0].date="Tomorrow",t.daily=i,t}var o=n(new Firebase(t));return{forecast:function(){return e(function(e,t){o.$loaded().then(function(t){var n=i(t);e(n)})})}}}])}(),function(e){function t(t,n){var r="ezfb-social-plugin-wrap",i="display: inline-block; width: 0; height: 0; overflow: hidden;",o=["fbPage"],s=function(e){var t='<span class="'+r+'" style="'+i+'">';return e.wrap(t).parent()},a=function(e){var t='<div class="'+r+'">';return e.wrap(t).parent()},c=function(e){return e.parent().hasClass(r)},u=function(e){var t=e.parent();return t.after(e).remove(),e};e.directive(n,["ezfb","$q","$document",function(e,r,i){var l=o.indexOf(n)>=0,d=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return{restrict:"EC",require:"?^ezfbXfbml",compile:function(n,r){return n.removeClass(d),function(n,r,i,o){function f(e){return function(){var t;m&&e===v&&(t=i.onrender,t&&n.$eval(t),m=!1,u(r))}}if(!o){var m=!1,v=0;e.$rendered().then(function(){r.addClass(d),n.$watch(function(){var e=[];return angular.forEach(t,function(t){e.push(i[t])}),e},function(t){var n;v++,m?e.XFBML.parse(r.parent()[0],f(v)):(m=!0,n=l?a:s,e.XFBML.parse(n(r)[0],f(v)))},!0)}),r.bind("$destroy",function(){c(r)&&u(r)})}}}}}])}e.provider("ezfb",function(){function e(e,t){return angular.isObject(t)?void angular.extend(e,t):angular.copy(e)}function t(e,t,n){return function(){return e.apply(t,n)}}var n={COMPLETED_REGISTRATION:"fb_mobile_complete_registration",VIEWED_CONTENT:"fb_mobile_content_view",SEARCHED:"fb_mobile_search",RATED:"fb_mobile_rate",COMPLETED_TUTORIAL:"fb_mobile_tutorial_completion",ADDED_TO_CART:"fb_mobile_add_to_cart",ADDED_TO_WISHLIST:"fb_mobile_add_to_wishlist",INITIATED_CHECKOUT:"fb_mobile_initiated_checkout",ADDED_PAYMENT_INFO:"fb_mobile_add_payment_info",ACHIEVED_LEVEL:"fb_mobile_level_achieved",UNLOCKED_ACHIEVEMENT:"fb_mobile_achievement_unlocked",SPENT_CREDITS:"fb_mobile_spent_credits"},r={CURRENCY:"fb_currency",REGISTRATION_METHOD:"fb_registration_method",CONTENT_TYPE:"fb_content_type",CONTENT_ID:"fb_content_id",SEARCH_STRING:"fb_search_string",SUCCESS:"fb_success",MAX_RATING_VALUE:"fb_max_rating_value",PAYMENT_INFO_AVAILABLE:"fb_payment_info_available",NUM_ITEMS:"fb_num_items",LEVEL:"fb_level",DESCRIPTION:"fb_description"},i=-1,o={api:[1,2,3],ui:1,getAuthResponse:i,getLoginStatus:0,login:0,logout:0,"Event.subscribe":1,"Event.unsubscribe":1,"XFBML.parse":1,"Canvas.Prefetcher.addStaticResource":i,"Canvas.Prefetcher.setCollectionMode":i,"Canvas.getPageInfo":0,"Canvas.hideFlashElement":i,"Canvas.scrollTo":i,"Canvas.setAutoGrow":i,"Canvas.setDoneLoading":0,"Canvas.setSize":i,"Canvas.setUrlHandler":0,"Canvas.showFlashElement":i,"Canvas.startTimer":i,"Canvas.stopTimer":0,"AppEvents.logEvent":i,"AppEvents.logPurchase":i,"AppEvents.activateApp":i},s="en_US",a={status:!0,cookie:!0,xfbml:!0,version:"v2.0"},c=["$window","$document","ezfbAsyncInit","ezfbLocale",function(e,t,n,r){!function(e){var t,n="facebook-jssdk",i=e.getElementsByTagName("script")[0];e.getElementById(n)||(t=e.createElement("script"),t.id=n,t.async=!0,t.src="//connect.facebook.net/"+r+"/sdk.js",i.parentNode.insertBefore(t,i))}(t[0]),e.fbAsyncInit=n}],u=c,l=["$window","ezfbInitParams",function(e,t){e.FB.init(t)}],d=l;return{setInitParams:function(t){e(a,t)},getInitParams:function(){return e(a)},setLocale:function(e){s=e},getLocale:function(){return s},setLoadSDKFunction:function(e){if(!angular.isArray(e)&&!angular.isFunction(e))throw new Error("Init function type error.");u=e},getLoadSDKFunction:function(){return u},setInitFunction:function(e){if(!angular.isArray(e)&&!angular.isFunction(e))throw new Error("Init function type error.");d=e},getInitFunction:function(){return d},$get:["$window","$q","$document","$parse","$rootScope","$injector","$timeout",function(c,f,m,v,p,g,h){var $,b,w,y,C,S;return y={},C=f.defer(),(a.appId||d!==l)&&C.resolve(),$=f.defer(),b=f.defer(),m[0].getElementById("fb-root")||m.find("body").append('<div id="fb-root"></div>'),S=function(){C.promise.then(function(){var e=function(){w.$$rendered=!0,h(function(){b.resolve()}),w.Event.unsubscribe("xfbml.render",e)};w.Event.subscribe("xfbml.render",e),g.invoke(d,null,{ezfbInitParams:a}),w.$$ready=!0,$.resolve()})},g.invoke(u,null,{ezfbAsyncInit:S,ezfbLocale:s}),w={$$ready:!1,$$rendered:!1,$ready:function(e){return angular.isFunction(e)&&$.promise.then(e),$.promise},$rendered:function(e){return angular.isFunction(e)&&b.promise.then(e),b.promise},init:function(t){e(a,t),C.resolve()},AppEvents:{EventNames:n,ParameterNames:r}},angular.forEach(o,function(e,n){var r=v(n),o=r.assign;o(w,function(){var o=t(function(t){var o,s;if(o=f.defer(),s=function(e){var r,i;for(r=angular.isFunction(t[e])?t[e]:angular.noop,i=function(){var e=Array.prototype.slice.call(arguments);p.$$phase?(r.apply(null,e),o.resolve.apply(o,e)):p.$apply(function(){r.apply(null,e),o.resolve.apply(o,e)})};t.length<=e;)t.push(null);var s;if("Event.subscribe"===n)s=t[0],angular.isUndefined(y[s])&&(y[s]=[]),y[s].push({original:r,wrapped:i});else if("Event.unsubscribe"===n&&(s=t[0],angular.isArray(y[s]))){var a,c,u=y[s].length;for(a=0;a<u;a++)if(c=y[s][a],c.original===r){i=c.wrapped,y[s].splice(a,1);break}}t[e]=i},e!==i)if(angular.isNumber(e))s(e);else if(angular.isArray(e)){var a,u;for(a=0;a<e.length;a++)if(u=e[a],t.length==u||t.length==u+1&&angular.isFunction(t[u])){s(u);break}}var l=r(c.FB);if(!l)throw new Error("Facebook API `FB."+n+"` doesn't exist.");return l.apply(c.FB,t),o.promise},null,[Array.prototype.slice.call(arguments)]);if("getAuthResponse"===n){if(angular.isUndefined(c.FB))throw new Error("`FB` is not ready.");return c.FB.getAuthResponse()}return e!==i?$.promise.then(o):void $.promise.then(o)})}),w}]}}).directive("ezfbXfbml",["ezfb","$parse","$compile","$timeout",function(e,t,n,r){return{restrict:"EAC",controller:function(){},compile:function(i,o){var s=i.html();return function(i,o,a){var c=!0,u=a.onrender,l=function(){c&&(u&&i.$eval(u),c=!1)};e.XFBML.parse(o[0],l);var d=t(a.ezfbXfbml).assign;i.$watch(a.ezfbXfbml,function(t){t&&(c=!0,o.html(s),n(o.contents())(i),r(function(){e.XFBML.parse(o[0],l)}),(d||angular.noop)(i,!1))},!0)}}}}]);var n={fbLike:["action","colorscheme","href","kidDirectedSite","layout","ref","share","showFaces","width"],fbShareButton:["href","layout","width"],fbSend:["colorscheme","href","kidDirectedSite","ref"],fbPost:["href","width"],fbFollow:["colorscheme","href","kidDirectedSite","layout","showFaces","width"],fbComments:["colorscheme","href","mobile","numPosts","orderBy","width"],fbCommentsCount:["href"],fbActivity:["action","appId","colorscheme","filter","header","height","linktarget","maxAge","recommendations","ref","site","width"],fbRecommendations:["action","appId","colorscheme","header","height","linktarget","maxAge","ref","site","width"],fbRecommendationsBar:["action","href","maxAge","numRecommendations","readTime","ref","side","site","trigger"],fbLikeBox:["colorscheme","forceWall","header","height","href","showBorder","showFaces","stream","width"],fbFacepile:["action","appId","colorscheme","href","maxRows","size","width"],fbPage:["href","width","height","hideCover","showFacepile","showPosts"],fbVideo:["href","width","allowfullscreen"]};angular.forEach(n,t)}(angular.module("ezfb",[]));